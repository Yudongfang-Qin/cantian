DROP TABLE IF EXISTS T_TM_1;
CREATE TABLE T_TM_1 (F_INT1 INT);
--TEST COMMIT AND ROLLBACK
INSERT INTO T_TM_1 VALUES(1);
SELECT * FROM T_TM_1;
ROLLBACK;
SELECT * FROM T_TM_1;
INSERT INTO T_TM_1 VALUES(1);
COMMIT;
SELECT * FROM T_TM_1;
--TEST SAVEPOINT
SAVEPOINT POINT1;
INSERT INTO T_TM_1 VALUES(2);
SAVEPOINT POINT2;
INSERT INTO T_TM_1 VALUES(3);
SAVEPOINT POINT3;
INSERT INTO T_TM_1 VALUES(4);
SAVEPOINT POINT4;
INSERT INTO T_TM_1 VALUES(5);
SAVEPOINT POINT5;
INSERT INTO T_TM_1 VALUES(6);
SAVEPOINT POINT6;
INSERT INTO T_TM_1 VALUES(7);
SAVEPOINT POINT5;
INSERT INTO T_TM_1 VALUES(8);
SELECT * FROM T_TM_1;
SELECT '1 POINT1 2 POINT2 3 POINT3 4 POINT4 5 6 POINT6 7 POINT5 8' AS SAVEPOINT_DESC FROM DUAL;
--TEST ROLLBACK TO SAVEPOINT
ROLLBACK TO SAVEPOINT POINT7;
ROLLBACK TO SAVEPOINT POINT5;
SELECT * FROM T_TM_1;
ROLLBACK TO SAVEPOINT POINT5;
SELECT * FROM T_TM_1;
ROLLBACK TO SAVEPOINT POINT6;
SELECT * FROM T_TM_1;
ROLLBACK TO SAVEPOINT POINT5;
SELECT * FROM T_TM_1;
COMMIT;
SELECT * FROM T_TM_1;
DROP TABLE T_TM_1;
RESTORE DATABASE UNTIL SCN 15587602284545111111;