

SQL> drop index TR_RECL_PRIM_IDX on TRANS_RECORD_LOG;

CT-00843, The table or view SYS.TRANS_RECORD_LOG does not exist.
SQL> 
SQL> drop index TR_RECL_CRNO2_IDX on TRANS_RECORD_LOG;

CT-00843, The table or view SYS.TRANS_RECORD_LOG does not exist.
SQL> 
SQL> drop index TR_RECL_CRNO1_IDX on TRANS_RECORD_LOG;

CT-00843, The table or view SYS.TRANS_RECORD_LOG does not exist.
SQL> 
SQL> drop index TR_RECL_IDNO_IDX on TRANS_RECORD_LOG;

CT-00843, The table or view SYS.TRANS_RECORD_LOG does not exist.
SQL> 
SQL> drop index TR_RECL_REFNO_IDX on TRANS_RECORD_LOG;

CT-00843, The table or view SYS.TRANS_RECORD_LOG does not exist.
SQL> 
SQL> drop table if exists TRANS_RECORD_LOG;

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Table: TRANS_RECORD_LOG                                      */
SQL> /*==============================================================*/
SQL> create table TRANS_RECORD_LOG
  2 (
  3    REF_NO               varchar(32) not null,
  4    TR_TIME              timestamp(3) not null default CURRENT_TIMESTAMP,
  5    TR_API_ID            varchar(32) not null,
  6    TR_API_VERSION       varchar(10),
  7    TR_CHANNEL           char(6),
  8    REQUEST              varchar(1024) not null,
  9    CREATE_TIME          timestamp(3) not null default CURRENT_TIMESTAMP,
 10    ID_TYPE              char(2),
 11    ID_NO                varchar(50),
 12    CUST_NAME            varchar(100),
 13    CUST_NO              char(16),
 14    C390_ID              char(16),
 15    UID                  varchar(12),
 16    CARD_NO1             varchar(50),
 17    CARD1_BANK_NAME      varchar(100),
 18    CARD1_CD_FLAG        char(1),
 19    CARD_NO2             varchar(50),
 20    CARD2_BANK_NAME      varchar(100),
 21    CARD2_CD_FLAG        char(1),
 22    REQUEST_REF_NO       varchar(32),
 23    CUST_TC_CODE         char(4),
 24    TX_CHNL1             varchar(5),
 25    CHNL_RSP_CODE1       varchar(16),
 26    CHNL_RSP_MSG1        varchar(512),
 27    TX_CHNL2             varchar(5),
 28    CHNL_RSP_CODE2       varchar(16),
 29    CHNL_RSP_MSG2        varchar(512),
 30    EXTRA_INFO           varchar(768),
 31    RESERVE1             varchar(32),
 32    RESERVE2             varchar(64),
 33    RESERVE3             varchar(128),
 34    RSP_CODE             varchar(12),
 35    RSP_MSG              varchar(512),
 36    VERSION_TIME         timestamp(3) null,
 37    UPDATE_TIME          timestamp(3) default CURRENT_TIMESTAMP,
 38    DONE_TIME            timestamp(3) null,
 39    DURATION             int not null default 0,
 40    STATE                char(1) not null default 'N',
 41    RESPONSE             varchar(3200)
 42 )partition by range (TR_TIME)
 43 (
 44 	partition P_20180120 values less than ('2018-01-21 00:00:00.000'),
 45 	partition P_20180121 values less than ('2018-01-22 00:00:00.000'),
 46 	partition P_20180122 values less than ('2018-01-23 00:00:00.000'),
 47 	partition P_20180123 values less than ('2018-01-24 00:00:00.000'),
 48 	partition P_20180124 values less than ('2018-01-25 00:00:00.000'),
 49 	partition P_20180125 values less than ('2018-01-26 00:00:00.000'),
 50 	partition P_20180126 values less than ('2018-01-27 00:00:00.000'),
 51 	partition P_20180127 values less than ('2018-01-28 00:00:00.000'),
 52 	partition P_20180128 values less than ('2018-01-29 00:00:00.000'),
 53 	partition P_20180129 values less than ('2018-01-30 00:00:00.000'),
 54 	partition P_20180130 values less than ('2018-01-31 00:00:00.000'),
 55 	partition P_20180131 values less than ('2018-02-01 00:00:00.000'),
 56 	partition P_20180201 values less than ('2018-02-02 00:00:00.000'),
 57 	partition P_20180202 values less than ('2018-02-03 00:00:00.000'),
 58 	partition P_20180203 values less than ('2018-02-04 00:00:00.000'),
 59 	partition P_20180204 values less than ('2018-02-05 00:00:00.000'),
 60 	partition P_20180205 values less than ('2018-02-06 00:00:00.000'),
 61 	partition P_20180206 values less than ('2018-02-07 00:00:00.000'),
 62 	partition P_20180207 values less than ('2018-02-08 00:00:00.000'),
 63 	partition P_20180208 values less than ('2018-02-09 00:00:00.000'),
 64 	partition P_20180209 values less than ('2018-02-10 00:00:00.000'),
 65 	partition P_20180210 values less than ('2018-02-11 00:00:00.000'),
 66 	partition P_20180211 values less than ('2018-02-12 00:00:00.000'),
 67 	partition P_20180212 values less than ('2018-02-13 00:00:00.000'),
 68 	partition P_20180213 values less than ('2018-02-14 00:00:00.000'),
 69 	partition P_20180214 values less than ('2018-02-15 00:00:00.000'),
 70 	partition P_20180215 values less than ('2018-02-16 00:00:00.000'),
 71 	partition P_20180216 values less than ('2018-02-17 00:00:00.000'),
 72 	partition P_20180217 values less than ('2018-02-18 00:00:00.000'),
 73 	partition P_20180218 values less than ('2018-02-19 00:00:00.000'),
 74 	partition P_20180219 values less than ('2018-02-20 00:00:00.000'),
 75 	partition P_20180220 values less than ('2018-02-21 00:00:00.000'),
 76 	partition P_20180221 values less than ('2018-02-22 00:00:00.000'),
 77 	partition P_20180222 values less than ('2018-02-23 00:00:00.000'),
 78 	partition P_20180223 values less than ('2018-02-24 00:00:00.000'),
 79 	partition P_20180224 values less than ('2018-02-25 00:00:00.000'),
 80 	partition P_20180225 values less than ('2018-02-26 00:00:00.000'),
 81 	partition P_20180226 values less than ('2018-02-27 00:00:00.000'),
 82 	partition P_20180227 values less than ('2018-02-28 00:00:00.000'),
 83 	partition P_20180228 values less than ('2018-03-01 00:00:00.000'),
 84 	partition P_max values less than (MAXVALUE)
 85 );

Succeed.

SQL> 
SQL> COMMENT ON COLUMN TRANS_RECORD_LOG.REF_NO is 'REF_NO Sharding Key';

Succeed.

SQL> COMMENT ON COLUMN TRANS_RECORD_LOG.TR_TIME is 'TR_TIME Partitioning Key (Per Day)';

Succeed.

SQL> COMMENT ON COLUMN TRANS_RECORD_LOG.STATE is 'STATE N: Not Available, S: Success, F: Failure, Z: post result failure';

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Index: TR_RECL_PRIM_IDX                                      */
SQL> /*==============================================================*/
SQL> create unique index TR_RECL_PRIM_IDX on TRANS_RECORD_LOG
  2 (
  3    TR_TIME, REF_NO 
  4 ) local;

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Index: TR_RECL_IDNO_IDX                                      */
SQL> /*==============================================================*/
SQL> create index TR_RECL_IDNO_IDX on TRANS_RECORD_LOG
  2 (
  3    ID_NO ASC
  4 ) local;

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Index: TR_RECL_CRNO1_IDX                                     */
SQL> /*==============================================================*/
SQL> create index TR_RECL_CRNO1_IDX on TRANS_RECORD_LOG
  2 (
  3    CARD_NO1 ASC
  4 ) local;

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Index: TR_RECL_CRNO2_IDX                                     */
SQL> /*==============================================================*/
SQL> create index TR_RECL_CRNO2_IDX on TRANS_RECORD_LOG
  2 (
  3    CARD_NO2 ASC
  4 ) local;

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Index: TR_RECL_REFNO_IDX                                      */
SQL> /*==============================================================*/
SQL> create index TR_RECL_REFNO_IDX on TRANS_RECORD_LOG
  2 (
  3    REF_NO ASC
  4 ) local;

Succeed.

SQL> 
SQL> drop index QR_RECL_PRIM_IDX on QUERY_RECORD_LOG;

CT-00843, The table or view SYS.QUERY_RECORD_LOG does not exist.
SQL> 
SQL> drop index QR_RECL_CRNO_IDX on QUERY_RECORD_LOG;

CT-00843, The table or view SYS.QUERY_RECORD_LOG does not exist.
SQL> 
SQL> drop index QR_RECL_IDNO_IDX on QUERY_RECORD_LOG;

CT-00843, The table or view SYS.QUERY_RECORD_LOG does not exist.
SQL> 
SQL> drop index QR_RECL_REFNO_IDX on QUERY_RECORD_LOG;

CT-00843, The table or view SYS.QUERY_RECORD_LOG does not exist.
SQL> 
SQL> drop table if exists QUERY_RECORD_LOG;

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Table: QUERY_RECORD_LOG                                      */
SQL> /*==============================================================*/
SQL> create table QUERY_RECORD_LOG
  2 (
  3    REF_NO               varchar(32) not null,
  4    TR_TIME              timestamp(3) not null default CURRENT_TIMESTAMP,
  5    TR_API_ID            varchar(32) not null,
  6    TR_API_VERSION       varchar(10),
  7    TR_CHANNEL           char(6),
  8    REQUEST              varchar(1024) not null,
  9    CREATE_TIME          timestamp(3) not null default CURRENT_TIMESTAMP,
 10    ID_TYPE              char(2),
 11    ID_NO                varchar(50),
 12    CUST_NAME            varchar(100),
 13    CUST_NO              char(16),
 14    C390_ID              char(16),
 15    UID                  varchar(12),
 16    CARD_NO              varchar(50),
 17    CARD_BANK_NAME       varchar(100),
 18    CARD_CD_FLAG         char(1),
 19    EXTRA_INFO           varchar(768),
 20    RESERVE1             varchar(32),
 21    RESERVE2             varchar(64),
 22    RESERVE3             varchar(128),
 23    RSP_CODE             varchar(12),
 24    RSP_MSG              varchar(512),
 25    UPDATE_TIME          timestamp(3) default CURRENT_TIMESTAMP,
 26    DONE_TIME            timestamp(3) null,
 27    DURATION             int not null default 0,
 28    STATE                char(1) not null default 'N',
 29    RESPONSE             varchar(3600)
 30 )partition by range (TR_TIME)
 31 (
 32 	partition P_20180120 values less than ('2018-01-21 00:00:00.000'),
 33 	partition P_20180121 values less than ('2018-01-22 00:00:00.000'),
 34 	partition P_20180122 values less than ('2018-01-23 00:00:00.000'),
 35 	partition P_20180123 values less than ('2018-01-24 00:00:00.000'),
 36 	partition P_20180124 values less than ('2018-01-25 00:00:00.000'),
 37 	partition P_20180125 values less than ('2018-01-26 00:00:00.000'),
 38 	partition P_20180126 values less than ('2018-01-27 00:00:00.000'),
 39 	partition P_20180127 values less than ('2018-01-28 00:00:00.000'),
 40 	partition P_20180128 values less than ('2018-01-29 00:00:00.000'),
 41 	partition P_20180129 values less than ('2018-01-30 00:00:00.000'),
 42 	partition P_20180130 values less than ('2018-01-31 00:00:00.000'),
 43 	partition P_20180131 values less than ('2018-02-01 00:00:00.000'),
 44 	partition P_20180201 values less than ('2018-02-02 00:00:00.000'),
 45 	partition P_20180202 values less than ('2018-02-03 00:00:00.000'),
 46 	partition P_20180203 values less than ('2018-02-04 00:00:00.000'),
 47 	partition P_20180204 values less than ('2018-02-05 00:00:00.000'),
 48 	partition P_20180205 values less than ('2018-02-06 00:00:00.000'),
 49 	partition P_20180206 values less than ('2018-02-07 00:00:00.000'),
 50 	partition P_20180207 values less than ('2018-02-08 00:00:00.000'),
 51 	partition P_20180208 values less than ('2018-02-09 00:00:00.000'),
 52 	partition P_20180209 values less than ('2018-02-10 00:00:00.000'),
 53 	partition P_20180210 values less than ('2018-02-11 00:00:00.000'),
 54 	partition P_20180211 values less than ('2018-02-12 00:00:00.000'),
 55 	partition P_20180212 values less than ('2018-02-13 00:00:00.000'),
 56 	partition P_20180213 values less than ('2018-02-14 00:00:00.000'),
 57 	partition P_20180214 values less than ('2018-02-15 00:00:00.000'),
 58 	partition P_20180215 values less than ('2018-02-16 00:00:00.000'),
 59 	partition P_20180216 values less than ('2018-02-17 00:00:00.000'),
 60 	partition P_20180217 values less than ('2018-02-18 00:00:00.000'),
 61 	partition P_20180218 values less than ('2018-02-19 00:00:00.000'),
 62 	partition P_20180219 values less than ('2018-02-20 00:00:00.000'),
 63 	partition P_20180220 values less than ('2018-02-21 00:00:00.000'),
 64 	partition P_20180221 values less than ('2018-02-22 00:00:00.000'),
 65 	partition P_20180222 values less than ('2018-02-23 00:00:00.000'),
 66 	partition P_20180223 values less than ('2018-02-24 00:00:00.000'),
 67 	partition P_20180224 values less than ('2018-02-25 00:00:00.000'),
 68 	partition P_20180225 values less than ('2018-02-26 00:00:00.000'),
 69 	partition P_20180226 values less than ('2018-02-27 00:00:00.000'),
 70 	partition P_20180227 values less than ('2018-02-28 00:00:00.000'),
 71 	partition P_20180228 values less than ('2018-03-01 00:00:00.000'),
 72 	partition P_max values less than (MAXVALUE)
 73 );

Succeed.

SQL> 
SQL> comment on column QUERY_RECORD_LOG.REF_NO is
  2 'Sharding Key';

Succeed.

SQL> 
SQL> comment on column QUERY_RECORD_LOG.TR_TIME is
  2 'Partitioning Key (Per Day)';

Succeed.

SQL> 
SQL> comment on column QUERY_RECORD_LOG.STATE is
  2 'N: Not Available, S: Success, F: Failure, Z: post result failure';

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Index: QR_RECL_PRIM_IDX                                      */
SQL> /*==============================================================*/
SQL> create unique index QR_RECL_PRIM_IDX on QUERY_RECORD_LOG
  2 (
  3    TR_TIME, REF_NO 
  4 ) local;

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Index: QR_RECL_IDNO_IDX                                      */
SQL> /*==============================================================*/
SQL> create index QR_RECL_IDNO_IDX on QUERY_RECORD_LOG
  2 (
  3    ID_NO ASC
  4 ) local;

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Index: QR_RECL_CRNO_IDX                                      */
SQL> /*==============================================================*/
SQL> create index QR_RECL_CRNO_IDX on QUERY_RECORD_LOG
  2 (
  3    CARD_NO ASC
  4 ) local;

Succeed.

SQL> 
SQL> /*==============================================================*/
SQL> /* Index: QR_RECL_REFNO_IDX                                      */
SQL> /*==============================================================*/
SQL> create index QR_RECL_REFNO_IDX on QUERY_RECORD_LOG
  2 (
  3    REF_NO ASC
  4 ) local;

Succeed.

SQL> 
SQL> -- DML SQL
SQL> INSERT INTO trans_record_log (REF_NO, TR_TIME, TR_API_ID, TR_API_VERSION, TR_CHANNEL, REQUEST, CREATE_TIME, ID_TYPE, ID_NO, CUST_NAME, CUST_NO, C390_ID, UID, CARD_NO1, CARD1_BANK_NAME, CARD1_CD_FLAG, CARD_NO2, CARD2_BANK_NAME, CARD2_CD_FLAG, REQUEST_REF_NO, CUST_TC_CODE, TX_CHNL1, CHNL_RSP_CODE1, CHNL_RSP_MSG1, TX_CHNL2, CHNL_RSP_CODE2, CHNL_RSP_MSG2, EXTRA_INFO, RESERVE1, RESERVE2, RESERVE3, RSP_CODE, RSP_MSG, VERSION_TIME, UPDATE_TIME, DONE_TIME, DURATION, STATE, RESPONSE) VALUES ('000000000000YwxWkwGBoTgATHgAAC3h', '2018-01-23 09:50:14.123', 'OMBB', '1.0', 'MOBAPP', '{\"refNo\":\"000000000000YwxWkwGBoTgATHgAAC3h\",\"data\":{\"cvv2\":\"**\",\"idType\":\"01\",\"pinBlock\":\"**\",\"mobileNo\":\"13111221123\",\"custName\":\"手机银行自动化专用一网通单一卡通一\",\"defaultCoverFlag\":\"Y\",\"idNo\":\"330102197807111235\",\"cardNo\":\"6214836660111689\",\"defaultPayFlag\":\"N\",\"expDate\":\"\",\"uid\":\"015200027705\",\"passwd\":\"**\",\"time\":\"0020180123094827\",\"payFlag\":\"Y\"},\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"1.0\",\"sid\":\"OMBB\"}', '2018-01-23 09:50:14.134', '01', '330102197807111235', '手机银行自动化专用一网通单一卡通一', '0100000012148325', '0199221222', '015200027705', '6214836660111689', '招商银行', '1', null, null, null, '000000000000YwxWkwGBoTgATHgAAC3h', null, 'BW', 'SUCC000', '[SUCC000]成功', null, null, null, '', '', '', '', '0', 'OK', '2018-01-23 09:50:14.392', '2018-01-23 09:50:14.395', '2018-01-23 09:50:14.390', 267, 'S', '{\"data\":{\"custNo\":\"0100000012148325\",\"c390Id\":null,\"cardFlag\":\"V1\"},\"status\":0,\"message\":\"OK\",\"refNo\":\"000000000000YwxWkwGBoTgATHgAAC3h\",\"cache\":{\"id\":\"ID#01330102197807111235\",\"cardNo\":\"CN#6214836660111689\",\"cardid\":\"CI#qrgsow1hjjzy397unzjl7h81h7nx8h5h\",\"time\":1516672214647}}');

1 rows affected.

SQL> INSERT INTO trans_record_log (REF_NO, TR_TIME, TR_API_ID, TR_API_VERSION, TR_CHANNEL, REQUEST, CREATE_TIME, ID_TYPE, ID_NO, CUST_NAME, CUST_NO, C390_ID, UID, CARD_NO1, CARD1_BANK_NAME, CARD1_CD_FLAG, CARD_NO2, CARD2_BANK_NAME, CARD2_CD_FLAG, REQUEST_REF_NO, CUST_TC_CODE, TX_CHNL1, CHNL_RSP_CODE1, CHNL_RSP_MSG1, TX_CHNL2, CHNL_RSP_CODE2, CHNL_RSP_MSG2, EXTRA_INFO, RESERVE1, RESERVE2, RESERVE3, RSP_CODE, RSP_MSG, VERSION_TIME, UPDATE_TIME, DONE_TIME, DURATION, STATE, RESPONSE) VALUES ('20180117105340p2ZRZwoews0BdfUAav', '2018-01-17 10:53:38.001', 'TXPK', '1.0', 'MOBAPP', '{\"refNo\":\"20180117105340p2ZRZwoews0BdfUAav\",\"data\":{\"checkType\":\"\",\"frCardNo\":\"6214836553950433\",\"idType\":\"01\",\"amt\":\"1.00\",\"memo\":\"test\",\"idNo\":\"440304199001011989\",\"serialNo\":\"\",\"toCardNo\":\"6221558812348899\",\"passwd\":\"**\",\"tcCode\":\"2003\",\"currency\":\"156\",\"time\":\"\",\"vCode\":\"**\"},\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"1.0\",\"sid\":\"TXPK\"}', '2018-01-17 10:53:38.111', '01', '440304199001011989', '追风筝的人贰零贰玖', '0100000012153630', '0199205927', '005200014328', '6214836553950433', '招商银行', '1', '6221558812348899', '平安银行', '2', 'CCPYcfGtUhgy40p2ZRZwoews0BdfUzxc', '2003', 'SV', 'SUCC000', '[SUCC000]成功', 'RI', 'SUCC000', null, '6214836553950434,6214836553950435,6214836553950436,6214836553950437', '', '', '', '0', 'OK', '2018-01-17 10:53:38.764', '2018-01-17 10:53:38.781', '2018-01-17 10:53:38.763', 1762, 'S', '{\"data\":{\"txSeqNo\":106981,\"txTime\":\"2018-01-17 10:53:38\",\"s400Channel\":\"BW\"},\"status\":0,\"message\":\"OK\",\"refNo\":\"20180117105340p2ZRZwoews0BdfUAav\",\"cache\":null}');

1 rows affected.

SQL> INSERT INTO trans_record_log (REF_NO, TR_TIME, TR_API_ID, TR_API_VERSION, TR_CHANNEL, REQUEST, CREATE_TIME, ID_TYPE, ID_NO, CUST_NAME, CUST_NO, C390_ID, UID, CARD_NO1, CARD1_BANK_NAME, CARD1_CD_FLAG, CARD_NO2, CARD2_BANK_NAME, CARD2_CD_FLAG, REQUEST_REF_NO, CUST_TC_CODE, TX_CHNL1, CHNL_RSP_CODE1, CHNL_RSP_MSG1, TX_CHNL2, CHNL_RSP_CODE2, CHNL_RSP_MSG2, EXTRA_INFO, RESERVE1, RESERVE2, RESERVE3, RSP_CODE, RSP_MSG, VERSION_TIME, UPDATE_TIME, DONE_TIME, DURATION, STATE, RESPONSE) VALUES ('3687221113fd5fab8d68e0b6d30d7423', '2018-01-16 15:14:36.000', 'AMBC', '2.0', 'MOBAPP', '{\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"data\":{\"idType\":\"01\",\"mobileNo\":\"18610112029\",\"custName\":\"布鲁克斯二六四\",\"idNo\":\"360312198806033013\",\"cardNo\":\"621210811994666635\",\"serialNo\":\"\",\"uid\":\"005000081567\",\"cardPhoneNo\":\"18610112029\",\"dcFlag\":\"N\",\"passwd\":\"**\",\"agreeItems\":\"YYYYYNNN\",\"time\":\"0020150609110500\",\"vCode\":\"**\"},\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\",\"sid\":\"AMBC\"}', '2018-01-16 15:14:36.003', '01', '360312198806033013', '布鲁克斯二六四', null, null, '005000081567', '621210811994666635', '工商银行', '1', null, null, null, null, null, null, null, null, null, null, null, '', '', '', '', '1207', '身份证与姓名不匹配，请重新输入!', '2018-01-16 15:14:51.971', '2018-01-16 15:14:51.979', '2018-01-16 15:14:51.969', 15969, 'F', '{\"data\":null,\"status\":1207,\"message\":\"身份证与姓名不匹配，请重新输入!\",\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"cache\":null}');

1 rows affected.

SQL> INSERT INTO query_record_log (REF_NO, TR_TIME, TR_API_ID, TR_API_VERSION, TR_CHANNEL, REQUEST, CREATE_TIME, ID_TYPE, ID_NO, CUST_NAME, CUST_NO, C390_ID, UID, CARD_NO, CARD_BANK_NAME, CARD_CD_FLAG, EXTRA_INFO, RESERVE1, RESERVE2, RESERVE3, RSP_CODE, RSP_MSG, UPDATE_TIME, DONE_TIME, DURATION, STATE, RESPONSE) VALUES ('000000000000YwxWkwGBth8Acw4AABLC', '2018-01-23 21:22:45.378', 'OMCS', '1.0', 'ONENET', '{\"data\":{\"cardNo\":\"075554480949\"},\"version\":\"1.0\",\"refNo\":\"000000000000YwxWkwGBth8Acw4AABLC\",\"auz\":{\"channel\":\"MOBAPP\",\"passwd\":\"666666\"},\"sid\":\"OMCS\"}', '2018-01-23 21:22:45.468', '01', '510104197901180006', '艾希', '0100000012147496', null, '005200020181', '075554480949', '招商银行', '1', 'EXTRA_INFO', 'RESERVE1', 'RESERVE2', 'RESERVE3', '0', 'OK', '2018-01-23 21:22:45.468', '2018-01-23 21:22:45.460', 82, 'S', '{\"data\":{\"idType\":\"01\",\"idNo\":\"510104197901180006\",\"cardNo\":\"075554480949\",\"channel\":\"02\",\"payFlag\":\"Y\",\"custName\":\"艾希\"},\"status\":0,\"message\":\"OK\",\"refNo\":\"000000000000YwxWkwGBth8Acw4AABLC\"}');

1 rows affected.

SQL> INSERT INTO query_record_log (REF_NO, TR_TIME, TR_API_ID, TR_API_VERSION, TR_CHANNEL, REQUEST, CREATE_TIME, ID_TYPE, ID_NO, CUST_NAME, CUST_NO, C390_ID, UID, CARD_NO, CARD_BANK_NAME, CARD_CD_FLAG, EXTRA_INFO, RESERVE1, RESERVE2, RESERVE3, RSP_CODE, RSP_MSG, UPDATE_TIME, DONE_TIME, DURATION, STATE, RESPONSE) VALUES ('a36a11b7aec545089713fe5fc3a8bd2a', '2018-01-08 15:14:39.558', 'AMCQ', '2.0', 'MOBAPP', '{\"sid\":\"AMCQ\",\"data\":{\"idNo\":\"130727198408059836\",\"idType\":\"01\"},\"refNo\":\"a36a11b7aec545089713fe5fc3a8bd2a\",\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\"}', '2018-01-08 15:14:39.612', '01', '130727198408059836', '请回答万事达高一', '0100000012152847', '0199476754', null, null, null, null, null, null, null, null, '0', 'OK', '2018-01-08 15:14:39.612', '2018-01-08 15:14:39.612', 54, 'S', '{\"totalCount\":1,\"list\":null,\"status\":0,\"message\":\"OK\",\"refNo\":\"a36a11b7aec545089713fe5fc3a8bd2a\"}');

1 rows affected.

SQL> 
SQL> insert into TRANS_RECORD_LOG (REF_NO, TR_TIME, TR_API_ID, TR_API_VERSION, TR_CHANNEL, REQUEST, CREATE_TIME)  values ('20180227194601p2ZRZwoews0BdfUwJl', '2018-02-27 10:53:38.001000', 'AMBB', '1.0', 'MOBAPP', '{\"refNo\":\"20180117105340p2ZRZwoews0BdfUAav\",\"data\":{\"checkType\":\"\",\"frCardNo\":\"6214836553950433\",\"idType\":\"01\",\"amt\":\"1.00\",\"memo\":\"test\",\"idNo\":\"440304199001011989\",\"serialNo\":\"\",\"toCardNo\":\"6221558812348899\",\"passwd\":\"**\",\"tcCode\":\"2003\",\"currency\":\"156\",\"time\":\"\",\"vCode\":\"**\"},\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"1.0\",\"sid\":\"TXPK\"}', '2018-02-27 10:53:38.001000');

1 rows affected.

SQL> update TRANS_RECORD_LOG set ID_TYPE = '01' , ID_NO = '190102197807111235' , CUST_NAME = '中文字符一定支持' , CUST_NO = null , C390_ID = '0199205922' , UID = '005200014323' , CARD_NO1 = '6214836553950431' , CARD1_BANK_NAME = '江苏银行' , CARD1_CD_FLAG = '1' , CARD_NO2 = '6221558812348895' , CARD2_BANK_NAME = '中国银行' , CARD2_CD_FLAG = '2' , REQUEST_REF_NO = 'CCPYcfGtUhgy40p2ZRZwoews0BdfUzxF' , CUST_TC_CODE = '2001' , TX_CHNL1 = 'ZH' , CHNL_RSP_CODE1 = 'SUCC000' , CHNL_RSP_MSG1 = '[SUCC000]失败' , EXTRA_INFO = '6214836552950434,6214836553650435,6214836253950436,6214836523950431' , RESERVE1 = 'disassemble' , RESERVE2 ='gdb is ok' , RESERVE3 = 'set print element 0' , UPDATE_TIME = '2018-01-27 10:53:38.001000'  where REF_NO = '20180227194601p2ZRZwoews0BdfUwJl'  and TR_TIME = '2018-02-27 10:53:38.001000';

1 rows affected.

SQL> update TRANS_RECORD_LOG set TX_CHNL2 = 'RM' , CHNL_RSP_CODE2 = 'SUCC999' , CHNL_RSP_MSG2 = '123abc' , UPDATE_TIME = '2018-12-27 10:53:38.001000'  where REF_NO = '20180227194601p2ZRZwoews0BdfUwJl'  and TR_TIME = '2018-02-27 10:53:38.001000';

1 rows affected.

SQL> update TRANS_RECORD_LOG set RSP_CODE = '1' , RSP_MSG = 'NO' , VERSION_TIME = '2017-12-27 10:53:38.001000' , UPDATE_TIME = '2017-12-27 10:53:38.001000' , DONE_TIME = '2017-10-27 10:53:38.001000' , DURATION = '123' , STATE = 'S' , RESPONSE = 'successfully'  where REF_NO = '20180227194601p2ZRZwoews0BdfUwJl'  and TR_TIME = '2018-02-27 10:53:38.001000';

1 rows affected.

SQL>
SQL> select * from TRANS_RECORD_LOG where 1=1  and (CARD_NO1 is null or CARD_NO1 = '621210811994666635')  and TR_TIME >= '2018-01-16 15:14:35.000000' and TR_TIME < '2018-08-16 15:14:36.000000' order by TR_TIME desc  offset 0 limit 20;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO1                                           CARD1_BANK_NAME                                                  CARD1_CD_FLAG CARD_NO2                                           CARD2_BANK_NAME                                                  CARD2_CD_FLAG REQUEST_REF_NO                   CUST_TC_CODE TX_CHNL1 CHNL_RSP_CODE1   CHNL_RSP_MSG1                                                    TX_CHNL2 CHNL_RSP_CODE2   CHNL_RSP_MSG2                                                    EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          VERSION_TIME                     UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------- ------------ -------- ---------------- ---------------------------------------------------------------- -------- ---------------- ---------------------------------------------------------------- ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------
3687221113fd5fab8d68e0b6d30d7423 2018-01-16 15:14:36.000          AMBC                             2.0            MOBAPP     {\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"data\":{\"idType\":\"01\",\"mobileNo\":\"18610112029\",\"custName\":\"布鲁克斯二六四\",\"idNo\":\"360312198806033013\",\"cardNo\":\"621210811994666635\",\"serialNo\":\"\",\"uid\":\"005000081567\",\"cardPhoneNo\":\"18610112029\",\"dcFlag\":\"N\",\"passwd\":\"**\",\"agreeItems\":\"YYYYYNNN\",\"time\":\"0020150609110500\",\"vCode\":\"**\"},\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\",\"sid\":\"AMBC\"} 2018-01-16 15:14:36.003          01      360312198806033013                                 布鲁克斯二六四                                                                              005000081567 621210811994666635                                 工商银行                                                     1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1207         身份证与姓名不匹配，请重新输入!                   2018-01-16 15:14:51.971          2018-01-16 15:14:51.979          2018-01-16 15:14:51.969          15969        F     {\"data\":null,\"status\":1207,\"message\":\"身份证与姓名不匹配，请重新输入!\",\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"cache\":null}

1 rows fetched.

SQL> select * from TRANS_RECORD_LOG where 1=1  and (ID_NO is null or ID_NO = '360312198806033013')  and TR_TIME >= '2018-01-16 15:14:35.000000' and TR_TIME < '2018-08-16 15:14:36.000000' order by TR_TIME desc  offset 0 limit 20;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO1                                           CARD1_BANK_NAME                                                  CARD1_CD_FLAG CARD_NO2                                           CARD2_BANK_NAME                                                  CARD2_CD_FLAG REQUEST_REF_NO                   CUST_TC_CODE TX_CHNL1 CHNL_RSP_CODE1   CHNL_RSP_MSG1                                                    TX_CHNL2 CHNL_RSP_CODE2   CHNL_RSP_MSG2                                                    EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          VERSION_TIME                     UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------- ------------ -------- ---------------- ---------------------------------------------------------------- -------- ---------------- ---------------------------------------------------------------- ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------
3687221113fd5fab8d68e0b6d30d7423 2018-01-16 15:14:36.000          AMBC                             2.0            MOBAPP     {\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"data\":{\"idType\":\"01\",\"mobileNo\":\"18610112029\",\"custName\":\"布鲁克斯二六四\",\"idNo\":\"360312198806033013\",\"cardNo\":\"621210811994666635\",\"serialNo\":\"\",\"uid\":\"005000081567\",\"cardPhoneNo\":\"18610112029\",\"dcFlag\":\"N\",\"passwd\":\"**\",\"agreeItems\":\"YYYYYNNN\",\"time\":\"0020150609110500\",\"vCode\":\"**\"},\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\",\"sid\":\"AMBC\"} 2018-01-16 15:14:36.003          01      360312198806033013                                 布鲁克斯二六四                                                                              005000081567 621210811994666635                                 工商银行                                                     1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1207         身份证与姓名不匹配，请重新输入!                   2018-01-16 15:14:51.971          2018-01-16 15:14:51.979          2018-01-16 15:14:51.969          15969        F     {\"data\":null,\"status\":1207,\"message\":\"身份证与姓名不匹配，请重新输入!\",\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"cache\":null}

1 rows fetched.

SQL> select * from TRANS_RECORD_LOG where 1=1  and TR_API_ID = 'AMBC' and TR_TIME >= '2018-01-16 15:14:35.000000' and TR_TIME < '2018-08-16 15:14:36.000000' order by TR_TIME desc  offset 0 limit 20;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO1                                           CARD1_BANK_NAME                                                  CARD1_CD_FLAG CARD_NO2                                           CARD2_BANK_NAME                                                  CARD2_CD_FLAG REQUEST_REF_NO                   CUST_TC_CODE TX_CHNL1 CHNL_RSP_CODE1   CHNL_RSP_MSG1                                                    TX_CHNL2 CHNL_RSP_CODE2   CHNL_RSP_MSG2                                                    EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          VERSION_TIME                     UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------- ------------ -------- ---------------- ---------------------------------------------------------------- -------- ---------------- ---------------------------------------------------------------- ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------
3687221113fd5fab8d68e0b6d30d7423 2018-01-16 15:14:36.000          AMBC                             2.0            MOBAPP     {\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"data\":{\"idType\":\"01\",\"mobileNo\":\"18610112029\",\"custName\":\"布鲁克斯二六四\",\"idNo\":\"360312198806033013\",\"cardNo\":\"621210811994666635\",\"serialNo\":\"\",\"uid\":\"005000081567\",\"cardPhoneNo\":\"18610112029\",\"dcFlag\":\"N\",\"passwd\":\"**\",\"agreeItems\":\"YYYYYNNN\",\"time\":\"0020150609110500\",\"vCode\":\"**\"},\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\",\"sid\":\"AMBC\"} 2018-01-16 15:14:36.003          01      360312198806033013                                 布鲁克斯二六四                                                                              005000081567 621210811994666635                                 工商银行                                                     1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1207         身份证与姓名不匹配，请重新输入!                   2018-01-16 15:14:51.971          2018-01-16 15:14:51.979          2018-01-16 15:14:51.969          15969        F     {\"data\":null,\"status\":1207,\"message\":\"身份证与姓名不匹配，请重新输入!\",\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"cache\":null}

1 rows fetched.

SQL> select * from TRANS_RECORD_LOG where 1=1  and (RSP_CODE is null or RSP_CODE = '1207')  and TR_TIME >= '2018-01-16 15:14:35.000000' and TR_TIME < '2018-08-16 15:14:36.000000' order by TR_TIME desc  offset 0 limit 20;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO1                                           CARD1_BANK_NAME                                                  CARD1_CD_FLAG CARD_NO2                                           CARD2_BANK_NAME                                                  CARD2_CD_FLAG REQUEST_REF_NO                   CUST_TC_CODE TX_CHNL1 CHNL_RSP_CODE1   CHNL_RSP_MSG1                                                    TX_CHNL2 CHNL_RSP_CODE2   CHNL_RSP_MSG2                                                    EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          VERSION_TIME                     UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------- ------------ -------- ---------------- ---------------------------------------------------------------- -------- ---------------- ---------------------------------------------------------------- ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------
3687221113fd5fab8d68e0b6d30d7423 2018-01-16 15:14:36.000          AMBC                             2.0            MOBAPP     {\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"data\":{\"idType\":\"01\",\"mobileNo\":\"18610112029\",\"custName\":\"布鲁克斯二六四\",\"idNo\":\"360312198806033013\",\"cardNo\":\"621210811994666635\",\"serialNo\":\"\",\"uid\":\"005000081567\",\"cardPhoneNo\":\"18610112029\",\"dcFlag\":\"N\",\"passwd\":\"**\",\"agreeItems\":\"YYYYYNNN\",\"time\":\"0020150609110500\",\"vCode\":\"**\"},\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\",\"sid\":\"AMBC\"} 2018-01-16 15:14:36.003          01      360312198806033013                                 布鲁克斯二六四                                                                              005000081567 621210811994666635                                 工商银行                                                     1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1207         身份证与姓名不匹配，请重新输入!                   2018-01-16 15:14:51.971          2018-01-16 15:14:51.979          2018-01-16 15:14:51.969          15969        F     {\"data\":null,\"status\":1207,\"message\":\"身份证与姓名不匹配，请重新输入!\",\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"cache\":null}

1 rows fetched.

SQL> select * from TRANS_RECORD_LOG where 1=1  and (ID_NO is null or ID_NO = '360312198806033013')  and ID_TYPE = '01' and (CARD_NO1 is null or CARD_NO1 = '621210811994666635') and TR_API_ID = 'AMBC' and (RSP_CODE is null or RSP_CODE = '1207')  and TR_API_ID in ( 'OMBB', 'OMBC', 'OMBI', 'OMBO', 'OMBU', 'RMBC', 'AMBC' )  and TR_TIME >= '2018-01-16 15:14:35.000000' and TR_TIME < '2018-08-16 15:14:36.000000' order by TR_TIME desc  offset 0 limit 20;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO1                                           CARD1_BANK_NAME                                                  CARD1_CD_FLAG CARD_NO2                                           CARD2_BANK_NAME                                                  CARD2_CD_FLAG REQUEST_REF_NO                   CUST_TC_CODE TX_CHNL1 CHNL_RSP_CODE1   CHNL_RSP_MSG1                                                    TX_CHNL2 CHNL_RSP_CODE2   CHNL_RSP_MSG2                                                    EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          VERSION_TIME                     UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------- ------------ -------- ---------------- ---------------------------------------------------------------- -------- ---------------- ---------------------------------------------------------------- ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------
3687221113fd5fab8d68e0b6d30d7423 2018-01-16 15:14:36.000          AMBC                             2.0            MOBAPP     {\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"data\":{\"idType\":\"01\",\"mobileNo\":\"18610112029\",\"custName\":\"布鲁克斯二六四\",\"idNo\":\"360312198806033013\",\"cardNo\":\"621210811994666635\",\"serialNo\":\"\",\"uid\":\"005000081567\",\"cardPhoneNo\":\"18610112029\",\"dcFlag\":\"N\",\"passwd\":\"**\",\"agreeItems\":\"YYYYYNNN\",\"time\":\"0020150609110500\",\"vCode\":\"**\"},\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\",\"sid\":\"AMBC\"} 2018-01-16 15:14:36.003          01      360312198806033013                                 布鲁克斯二六四                                                                              005000081567 621210811994666635                                 工商银行                                                     1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1207         身份证与姓名不匹配，请重新输入!                   2018-01-16 15:14:51.971          2018-01-16 15:14:51.979          2018-01-16 15:14:51.969          15969        F     {\"data\":null,\"status\":1207,\"message\":\"身份证与姓名不匹配，请重新输入!\",\"refNo\":\"3687221113fd5fab8d68e0b6d30d7423\",\"cache\":null}

1 rows fetched.

SQL> select * from TRANS_RECORD_LOG where 1=1  and TR_API_ID in ( 'OMBB', 'OMBC', 'OMBI', 'OMBO', 'OMBU', 'RMBC' )  and TR_TIME >= '2018-01-16 15:14:35.000000' and TR_TIME < '2018-08-16 15:14:36.000000' order by TR_TIME desc  offset 0 limit 20;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO1                                           CARD1_BANK_NAME                                                  CARD1_CD_FLAG CARD_NO2                                           CARD2_BANK_NAME                                                  CARD2_CD_FLAG REQUEST_REF_NO                   CUST_TC_CODE TX_CHNL1 CHNL_RSP_CODE1   CHNL_RSP_MSG1                                                    TX_CHNL2 CHNL_RSP_CODE2   CHNL_RSP_MSG2                                                    EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          VERSION_TIME                     UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------- ------------ -------- ---------------- ---------------------------------------------------------------- -------- ---------------- ---------------------------------------------------------------- ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------
000000000000YwxWkwGBoTgATHgAAC3h 2018-01-23 09:50:14.123          OMBB                             1.0            MOBAPP     {\"refNo\":\"000000000000YwxWkwGBoTgATHgAAC3h\",\"data\":{\"cvv2\":\"**\",\"idType\":\"01\",\"pinBlock\":\"**\",\"mobileNo\":\"13111221123\",\"custName\":\"手机银行自动化专用一网通单一卡通一\",\"defaultCoverFlag\":\"Y\",\"idNo\":\"330102197807111235\",\"cardNo\":\"6214836660111689\",\"defaultPayFlag\":\"N\",\"expDate\":\"\",\"uid\":\"015200027705\",\"passwd\":\"**\",\"time\":\"0020180123094827\",\"payFlag\":\"Y\"},\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"1.0\",\"sid\":\"OMBB\"} 2018-01-23 09:50:14.134          01      330102197807111235                                 手机银行自动化专用一网通单一卡通一              0100000012148325 0199221222       015200027705 6214836660111689                                   招商银行                                                     1                                                                                                                                               000000000000YwxWkwGBoTgATHgAAC3h              BW       SUCC000          [SUCC000]成功                                                                                                                                                                                                                                                                                                                                                                                 0            OK                                                               2018-01-23 09:50:14.392          2018-01-23 09:50:14.395          2018-01-23 09:50:14.390          267          S     {\"data\":{\"custNo\":\"0100000012148325\",\"c390Id\":null,\"cardFlag\":\"V1\"},\"status\":0,\"message\":\"OK\",\"refNo\":\"000000000000YwxWkwGBoTgATHgAAC3h\",\"cache\":{\"id\":\"ID#01330102197807111235\",\"cardNo\":\"CN#6214836660111689\",\"cardid\":\"CI#qrgsow1hjjzy397unzjl7h81h7nx8h5h\",\"time\":1516672214647}}

1 rows fetched.

SQL> 
SQL> select * from QUERY_RECORD_LOG where 1=1  and (ID_NO is null or ID_NO = '130727198408059836')  and TR_TIME >= '2018-01-08 15:14:39.557' and TR_TIME < '2018-01-09 15:14:39.558' order by TR_TIME desc  offset 0 limit 20;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO                                            CARD_BANK_NAME                                                   CARD_CD_FLAG EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------
a36a11b7aec545089713fe5fc3a8bd2a 2018-01-08 15:14:39.558          AMCQ                             2.0            MOBAPP     {\"sid\":\"AMCQ\",\"data\":{\"idNo\":\"130727198408059836\",\"idType\":\"01\"},\"refNo\":\"a36a11b7aec545089713fe5fc3a8bd2a\",\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\"} 2018-01-08 15:14:39.612          01      130727198408059836                                 请回答万事达高一                                         0100000012152847 0199476754                                                                                                                                                                                                                                                                                                                                                                                         0            OK                                                               2018-01-08 15:14:39.612          2018-01-08 15:14:39.612          54           S     {\"totalCount\":1,\"list\":null,\"status\":0,\"message\":\"OK\",\"refNo\":\"a36a11b7aec545089713fe5fc3a8bd2a\"}

1 rows fetched.

SQL> select * from QUERY_RECORD_LOG where 1=1  and (ID_NO is null or ID_NO = '130727198408059836')  and ID_TYPE = '01' and (CARD_NO is null or CARD_NO = '075554480949')  and TR_API_ID = 'AMCQ' and (RSP_CODE is null or RSP_CODE = '0')  and TR_API_ID in ( 'OMBB', 'OMBC', 'OMBI', 'OMBO', 'OMBU', 'RMBC', 'AMCQ' )  and TR_TIME >= '2018-01-08 15:14:39.557' and TR_TIME < '2018-01-09 15:14:39.558' order by TR_TIME desc  offset 0 limit 20;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO                                            CARD_BANK_NAME                                                   CARD_CD_FLAG EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------
a36a11b7aec545089713fe5fc3a8bd2a 2018-01-08 15:14:39.558          AMCQ                             2.0            MOBAPP     {\"sid\":\"AMCQ\",\"data\":{\"idNo\":\"130727198408059836\",\"idType\":\"01\"},\"refNo\":\"a36a11b7aec545089713fe5fc3a8bd2a\",\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\"} 2018-01-08 15:14:39.612          01      130727198408059836                                 请回答万事达高一                                         0100000012152847 0199476754                                                                                                                                                                                                                                                                                                                                                                                         0            OK                                                               2018-01-08 15:14:39.612          2018-01-08 15:14:39.612          54           S     {\"totalCount\":1,\"list\":null,\"status\":0,\"message\":\"OK\",\"refNo\":\"a36a11b7aec545089713fe5fc3a8bd2a\"}

1 rows fetched.

SQL> select * from QUERY_RECORD_LOG where 1=1  and (CARD_NO is null or CARD_NO = '075554480949')  and TR_TIME >= '2018-01-08 15:14:39.557' and TR_TIME < '2018-01-09 15:14:39.558' order by TR_TIME desc  offset 0 limit 20;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO                                            CARD_BANK_NAME                                                   CARD_CD_FLAG EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------
a36a11b7aec545089713fe5fc3a8bd2a 2018-01-08 15:14:39.558          AMCQ                             2.0            MOBAPP     {\"sid\":\"AMCQ\",\"data\":{\"idNo\":\"130727198408059836\",\"idType\":\"01\"},\"refNo\":\"a36a11b7aec545089713fe5fc3a8bd2a\",\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\"} 2018-01-08 15:14:39.612          01      130727198408059836                                 请回答万事达高一                                         0100000012152847 0199476754                                                                                                                                                                                                                                                                                                                                                                                         0            OK                                                               2018-01-08 15:14:39.612          2018-01-08 15:14:39.612          54           S     {\"totalCount\":1,\"list\":null,\"status\":0,\"message\":\"OK\",\"refNo\":\"a36a11b7aec545089713fe5fc3a8bd2a\"}

1 rows fetched.

SQL> select * from QUERY_RECORD_LOG where 1=1  and TR_API_ID in ( 'OMBB', 'OMBC', 'OMBI', 'OMBO', 'OMBU', 'RMBC', 'AMCQ' )  and TR_TIME >= '2018-01-08 15:14:39.557' and TR_TIME < '2018-01-09 15:14:39.558' order by TR_TIME desc  offset 0 limit 20;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO                                            CARD_BANK_NAME                                                   CARD_CD_FLAG EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------
a36a11b7aec545089713fe5fc3a8bd2a 2018-01-08 15:14:39.558          AMCQ                             2.0            MOBAPP     {\"sid\":\"AMCQ\",\"data\":{\"idNo\":\"130727198408059836\",\"idType\":\"01\"},\"refNo\":\"a36a11b7aec545089713fe5fc3a8bd2a\",\"auz\":{\"passwd\":\"**\",\"channel\":\"MOBAPP\"},\"version\":\"2.0\"} 2018-01-08 15:14:39.612          01      130727198408059836                                 请回答万事达高一                                         0100000012152847 0199476754                                                                                                                                                                                                                                                                                                                                                                                         0            OK                                                               2018-01-08 15:14:39.612          2018-01-08 15:14:39.612          54           S     {\"totalCount\":1,\"list\":null,\"status\":0,\"message\":\"OK\",\"refNo\":\"a36a11b7aec545089713fe5fc3a8bd2a\"}

1 rows fetched.

SQL> 
SQL> commit;

Succeed.

SQL> 
SQL> -- DTS2018032704162
SQL> SELECT ref_no, tr_time, tr_api_id, tr_api_version, tr_channel, request, create_time, id_type, id_no, cust_name, cust_no, c390_id, uid, card_no1, card1_bank_name, card1_cd_flag, card_no2, card2_bank_name, card2_cd_flag, request_ref_no, cust_tc_code, tx_chnl1, chnl_rsp_code1, chnl_rsp_msg1, tx_chnl2, chnl_rsp_code2, chnl_rsp_msg2, extra_info, reserve1, reserve2, reserve3, rsp_code, rsp_msg, version_time, update_time, done_time, duration, state, response FROM
  2  trans_record_log WHERE card_no1 = null AND tr_time >= '2018-02-26 18:41:42' AND tr_time < '2018-02-27 19:41:42' ORDER BY 2 DESC LIMIT 20 + 0;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO1                                           CARD1_BANK_NAME                                                  CARD1_CD_FLAG CARD_NO2                                           CARD2_BANK_NAME                                                  CARD2_CD_FLAG REQUEST_REF_NO                   CUST_TC_CODE TX_CHNL1 CHNL_RSP_CODE1   CHNL_RSP_MSG1                                                    TX_CHNL2 CHNL_RSP_CODE2   CHNL_RSP_MSG2                                                    EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          VERSION_TIME                     UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------- ------------ -------- ---------------- ---------------------------------------------------------------- -------- ---------------- ---------------------------------------------------------------- ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------

0 rows fetched.

SQL> SELECT ref_no, tr_time, tr_api_id, tr_api_version, tr_channel, request, create_time, id_type, id_no, cust_name, cust_no, c390_id, uid, card_no1, card1_bank_name, card1_cd_flag, card_no2, card2_bank_name, card2_cd_flag, request_ref_no, cust_tc_code, tx_chnl1, chnl_rsp_code1, chnl_rsp_msg1, tx_chnl2, chnl_rsp_code2, chnl_rsp_msg2, extra_info, reserve1, reserve2, reserve3, rsp_code, rsp_msg, version_time, update_time, done_time, duration, state, response FROM
  2  trans_record_log WHERE (card_no1 IS NULL OR card_no1 = null) AND tr_time >= '2018-02-26 00:00:00' AND tr_time < '2018-02-27 00:01:00' ORDER BY 2 DESC LIMIT 20 + 0;

REF_NO                           TR_TIME                          TR_API_ID                        TR_API_VERSION TR_CHANNEL REQUEST                                                          CREATE_TIME                      ID_TYPE ID_NO                                              CUST_NAME                                                        CUST_NO          C390_ID          UID          CARD_NO1                                           CARD1_BANK_NAME                                                  CARD1_CD_FLAG CARD_NO2                                           CARD2_BANK_NAME                                                  CARD2_CD_FLAG REQUEST_REF_NO                   CUST_TC_CODE TX_CHNL1 CHNL_RSP_CODE1   CHNL_RSP_MSG1                                                    TX_CHNL2 CHNL_RSP_CODE2   CHNL_RSP_MSG2                                                    EXTRA_INFO                                                       RESERVE1                         RESERVE2                                                         RESERVE3                                                         RSP_CODE     RSP_MSG                                                          VERSION_TIME                     UPDATE_TIME                      DONE_TIME                        DURATION     STATE RESPONSE                                                        
-------------------------------- -------------------------------- -------------------------------- -------------- ---------- ---------------------------------------------------------------- -------------------------------- ------- -------------------------------------------------- ---------------------------------------------------------------- ---------------- ---------------- ------------ -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------------------------- ---------------------------------------------------------------- ------------- -------------------------------- ------------ -------- ---------------- ---------------------------------------------------------------- -------- ---------------- ---------------------------------------------------------------- ---------------------------------------------------------------- -------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ------------ ---------------------------------------------------------------- -------------------------------- -------------------------------- -------------------------------- ------------ ----- ----------------------------------------------------------------

0 rows fetched.

SQL> 
SQL> drop index TR_RECL_PRIM_IDX on TRANS_RECORD_LOG;

Succeed.

SQL> drop index TR_RECL_CRNO2_IDX on TRANS_RECORD_LOG;

Succeed.

SQL> drop index TR_RECL_CRNO1_IDX on TRANS_RECORD_LOG;

Succeed.

SQL> drop index TR_RECL_IDNO_IDX on TRANS_RECORD_LOG;

Succeed.

SQL> drop index TR_RECL_REFNO_IDX on TRANS_RECORD_LOG;

Succeed.

SQL> drop table TRANS_RECORD_LOG;

Succeed.

SQL> 
SQL> drop index QR_RECL_PRIM_IDX on QUERY_RECORD_LOG;

Succeed.

SQL> drop index QR_RECL_CRNO_IDX on QUERY_RECORD_LOG;

Succeed.

SQL> drop index QR_RECL_IDNO_IDX on QUERY_RECORD_LOG;

Succeed.

SQL> drop index QR_RECL_REFNO_IDX on QUERY_RECORD_LOG;

Succeed.

SQL> drop table QUERY_RECORD_LOG;

Succeed.

SQL> 


