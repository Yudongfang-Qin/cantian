

SQL> DROP TABLE IF EXISTS T_MULTI_DEL;

Succeed.

SQL> DROP TABLE IF EXISTS T_MULTI_DEL_TRIG;

Succeed.

SQL> CREATE TABLE T_MULTI_DEL(F1 INT, F2 INT);

Succeed.

SQL> CREATE TABLE T_MULTI_DEL_TRIG(F1 INT, F2 INT);

Succeed.

SQL> CREATE INDEX IDX_T_MULTI_DEL ON T_MULTI_DEL(F1);

Succeed.

SQL> INSERT INTO T_MULTI_DEL VALUES(1,1);

1 rows affected.

SQL> 
SQL> CREATE OR REPLACE TRIGGER MULTI_DEL_TRIG_ROW BEFORE DELETE ON T_MULTI_DEL
  2 FOR EACH ROW
  3 BEGIN
  4   INSERT INTO T_MULTI_DEL_TRIG VALUES(1,1);
  5 END;
  6 /

Succeed.

SQL> 
SQL> DELETE T1,T2 FROM T_MULTI_DEL T1 JOIN T_MULTI_DEL T2 ON T1.F1=T2.F1;

1 rows affected.

SQL> SELECT COUNT(*) FROM T_MULTI_DEL_TRIG;

COUNT(*)            
--------------------
1                   

1 rows fetched.

SQL> ROLLBACK;

Succeed.

SQL> DROP TABLE IF EXISTS T_MULTI_DEL;

Succeed.

SQL> DROP TABLE IF EXISTS T_MULTI_DEL_TRIG;

Succeed.

SQL> 
SQL> DROP TABLE IF EXISTS T_MULTI_DEL_MIGR;

Succeed.

SQL> DROP TABLE IF EXISTS T_MULTI_DEL_TRIG_MIGR;

Succeed.

SQL> CREATE TABLE T_MULTI_DEL_MIGR(F1 INT, F2 VARCHAR(4000), F3 VARCHAR(4000));

Succeed.

SQL> CREATE TABLE T_MULTI_DEL_TRIG_MIGR(F1 INT, F2 VARCHAR(4000), F3 VARCHAR(4000));

Succeed.

SQL> CREATE INDEX IDX_T_MULTI_DEL_MIGR ON T_MULTI_DEL_MIGR(F1);

Succeed.

SQL> INSERT INTO T_MULTI_DEL_MIGR VALUES(1,'a',lpad('a',3500,'a'));

1 rows affected.

SQL> INSERT INTO T_MULTI_DEL_MIGR VALUES(2,'b',lpad('b',3500,'b'));

1 rows affected.

SQL> UPDATE T_MULTI_DEL_MIGR SET F2=lpad('c',4000,'c'),F3=lpad('d',4000,'d');

2 rows affected.

SQL> 
SQL> CREATE OR REPLACE TRIGGER MULTI_DEL_TRIG_ROW_MIGR BEFORE DELETE ON T_MULTI_DEL_MIGR
  2 FOR EACH ROW
  3 BEGIN
  4   INSERT INTO T_MULTI_DEL_TRIG_MIGR VALUES(1,'a',lpad('a',3500,'a'));
  5   INSERT INTO T_MULTI_DEL_TRIG_MIGR VALUES(2,'b',lpad('b',3500,'b'));
  6   UPDATE T_MULTI_DEL_TRIG_MIGR SET F2=lpad('c',4000,'c'),F3=lpad('d',4000,'d');
  7 END;
  8 /

Succeed.

SQL> 
SQL> DELETE T1,T2 FROM T_MULTI_DEL_MIGR T1 JOIN T_MULTI_DEL_MIGR T2 ON T1.F1=T2.F1;

2 rows affected.

SQL> SELECT COUNT(*) FROM T_MULTI_DEL_TRIG_MIGR;

COUNT(*)            
--------------------
4                   

1 rows fetched.

SQL> ROLLBACK;

Succeed.

SQL> DROP TABLE IF EXISTS T_MULTI_DEL_MIGR;

Succeed.

SQL> DROP TABLE IF EXISTS T_MULTI_DEL_TRIG_MIGR;

Succeed.

SQL> 
SQL> 
SQL> DROP TABLE IF EXISTS T_MULTI_DEL_LINK;

Succeed.

SQL> DROP TABLE IF EXISTS T_MULTI_DEL_TRIG_LINK;

Succeed.

SQL> CREATE TABLE T_MULTI_DEL_LINK(F1 INT, F2 VARCHAR(8000),F3 VARCHAR(8000),F4 VARCHAR(8000),F5 VARCHAR(8000));

Succeed.

SQL> CREATE TABLE T_MULTI_DEL_TRIG_LINK(F1 INT, F2 VARCHAR(8000),F3 VARCHAR(8000),F4 VARCHAR(8000),F5 VARCHAR(8000));

Succeed.

SQL> CREATE INDEX IDX_T_MULTI_DEL_LINK ON T_MULTI_DEL_LINK(F1);

Succeed.

SQL> INSERT INTO T_MULTI_DEL_LINK VALUES(1,LPAD('A',8000,'A'),LPAD('B',8000,'B'),LPAD('C',8000,'C'),'D');

1 rows affected.

SQL> 
SQL> CREATE OR REPLACE TRIGGER MULTI_DEL_TRIG_ROW_LINK BEFORE DELETE ON T_MULTI_DEL_LINK
  2 FOR EACH ROW
  3 BEGIN
  4   INSERT INTO T_MULTI_DEL_TRIG_LINK VALUES(1,LPAD('A',8000,'A'),LPAD('B',8000,'B'),LPAD('C',8000,'C'),'D');
  5 END;
  6 /

Succeed.

SQL> 
SQL> DELETE T1,T2 FROM T_MULTI_DEL_LINK T1 JOIN T_MULTI_DEL_LINK T2 ON T1.F1=T2.F1;

1 rows affected.

SQL> SELECT COUNT(*) FROM T_MULTI_DEL_TRIG_LINK;

COUNT(*)            
--------------------
1                   

1 rows fetched.

SQL> ROLLBACK;

Succeed.

SQL> DROP TABLE IF EXISTS T_MULTI_DEL_LINK;

Succeed.

SQL> DROP TABLE IF EXISTS T_MULTI_DEL_TRIG_LINK;

Succeed.

SQL> 


