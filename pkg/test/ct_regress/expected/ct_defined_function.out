

SQL> DROP FUNCTION IF EXISTS TEST_FUNC_1;

Succeed.

SQL> CREATE FUNCTION TEST_FUNC_1(A varchar)
  2 RETURN varchar
  3 AS
  4 BEGIN
  5    RETURN SUBSTR(A,1,2);
  6 END;
  7 /

Succeed.

SQL> 
SQL> DROP FUNCTION IF EXISTS TEST_FUNC_2;

Succeed.

SQL> CREATE FUNCTION TEST_FUNC_2(A varchar)
  2 RETURN varchar
  3 AS
  4 BEGIN
  5    if (TEST_FUNC_1(A) = 'ab') then
  6    	return A;
  7    else
  8    	return TEST_FUNC_1(A);
  9    end if; 
 10 END;
 11 /

Succeed.

SQL> 
SQL> SELECT TEST_FUNC_2('abc') from dual;

TEST_FUNC_2('ABC')                                              
----------------------------------------------------------------
abc                                                             

1 rows fetched.

SQL> SELECT TEST_FUNC_2('aabc') from dual;

TEST_FUNC_2('AABC')                                             
----------------------------------------------------------------
aa                                                              

1 rows fetched.

SQL> 
SQL> 
SQL> --BEGIN:TEST RETURN DATE
SQL> create or replace function string_to_datetime(date_str varchar2) 
  2 return date as date_time date;
  3 begin 
  4 	date_time := to_date(date_str, 'YYYY-MM-DD"T"HH24:MI:SS'); 
  5 	return date_time; 
  6 end;
  7 /

Succeed.

SQL> 
SQL> SELECT string_to_datetime('2018-01-01T01:01:01') FROM DUAL;

STRING_TO_DATETIME('2018-01-01T01:01:01')
-----------------------------------------
2018-01-01 01:01:01                      

1 rows fetched.

SQL> --END:TEST RETURN DATE
SQL> 
SQL> 
SQL> --test function name with quotes
SQL> --add 2018/07/10
SQL> --begin
SQL> --expect success
SQL> CREATE OR REPLACE FUNCTION get_bal(acc_no IN NUMBER)
  2    RETURN NUMBER
  3    IS acc_bal NUMBER(11,2);
  4    BEGIN
  5       acc_bal := acc_no;
  6       RETURN(acc_bal);
  7     END get_bal;
  8 /

Succeed.

SQL> 
SQL> --expect error
SQL> CREATE OR REPLACE FUNCTION "get_bal"(acc_no IN NUMBER)
  2    RETURN NUMBER
  3    IS acc_bal NUMBER(11,2);
  4    BEGIN
  5       acc_bal := acc_no;
  6       RETURN(acc_bal);
  7     END get_bal;
  8 /

Succeed.
Warning:
PL/SQL(SYS.get_bal) terminated with compiling errors
[7:9] PLC-00920 Undefined symbol GET_BAL


SQL> 
SQL> --expect error
SQL> CREATE OR REPLACE FUNCTION "get_bal"(acc_no IN NUMBER)
  2    RETURN NUMBER
  3    IS acc_bal NUMBER(11,2);
  4    BEGIN
  5       acc_bal := acc_no;
  6       RETURN(acc_bal);
  7     END "Get_bal";
  8 /

Succeed.
Warning:
PL/SQL(SYS.get_bal) terminated with compiling errors
[7:9] PLC-00920 Undefined symbol Get_bal


SQL> 
SQL> --expect success
SQL> CREATE OR REPLACE FUNCTION "get_bal"(acc_no IN NUMBER)
  2    RETURN NUMBER
  3    IS acc_bal NUMBER(11,2);
  4    BEGIN
  5       acc_bal := acc_no + 1;
  6       RETURN(acc_bal);
  7     END;
  8 /

Succeed.

SQL> 
SQL> --expect success
SQL> CREATE OR REPLACE FUNCTION "get_bal"(acc_no IN NUMBER)
  2    RETURN NUMBER
  3    IS acc_bal NUMBER(11,2);
  4    BEGIN
  5       acc_bal := acc_no + 1;
  6       RETURN(acc_bal);
  7     END "get_bal";
  8 /

Succeed.

SQL> 
SQL> --expect success
SQL> CREATE OR REPLACE FUNCTION sys."get_bal"(acc_no IN NUMBER)
  2    RETURN NUMBER
  3    IS acc_bal NUMBER(11,2);
  4    BEGIN
  5       acc_bal := acc_no + 1;
  6       RETURN(acc_bal);
  7     END "get_bal";
  8 /

Succeed.

SQL> 
SQL> --test expect error:the self-recursive function appears in the DEFALUE expression of its own parameter
SQL> CREATE OR REPLACE FUNCTION test_func(p1 int, p2 integer default test_func(10)+abs(-10)) return integer 
  2 IS
  3 CURRENT_USER varchar(10);
  4 BEGIN
  5  CURRENT_USER := 'cantian';
  6  dbe_output.print_line( 'results' || CURRENT_USER||':'||p2);
  7  RETURN p2;
  8 END;
  9 /

Succeed.
Warning:
PL/SQL(SYS.TEST_FUNC) terminated with compiling errors
[1:65] PLC-00916 PL/SQL:syntax error(unexpected procedure/function)


SQL> --test:the self-recursive function appears in the DEFALUE expression of its own parameter
SQL> 
SQL> --expect return 2
SQL> select "get_bal"(1) from dual;

"GET_BAL"(1)                            
----------------------------------------
2                                       

1 rows fetched.

SQL> --expect return 1
SQL> select get_bal(1) from dual;

GET_BAL(1)                              
----------------------------------------
1                                       

1 rows fetched.

SQL> 
SQL> drop function get_bal;

Succeed.

SQL> drop function "get_bal";

Succeed.

SQL> 
SQL> --expect success
SQL> CREATE OR REPLACE FUNCTION sys."get_bal"(acc_no IN NUMBER)
  2    RETURN NUMBER
  3    IS acc_bal NUMBER(11,2);
  4    BEGIN
  5       acc_bal := acc_no + 2;
  6       RETURN(acc_bal);
  7     END "get_bal";
  8 /

Succeed.

SQL> --expect return 3
SQL> select "get_bal"(1) from dual;

"GET_BAL"(1)                            
----------------------------------------
3                                       

1 rows fetched.

SQL> --expect return 3
SQL> select sys."get_bal"(1) from dual;

SYS."GET_BAL"(1)                        
----------------------------------------
3                                       

1 rows fetched.

SQL> drop function "get_bal";

Succeed.

SQL> --end test function name with quotes
SQL> 
SQL> DROP TABLE IF EXISTS UTILS_ERRLOG;

Succeed.

SQL> DROP TABLE IF EXISTS T_VTABSP_CHK_BTSOTHPARA_A42;

Succeed.

SQL> DROP TABLE IF EXISTS T_D_BTSOTHPARA_A4;

Succeed.

SQL> 
SQL> CREATE TABLE UTILS_ERRLOG
  2 (
  3   IINDEX NUMBER(10) NOT NULL,
  4   VERSION VARCHAR(75 BYTE) NOT NULL,
  5   PLANID NUMBER(10) NOT NULL,
  6   CMENEID NUMBER(10) NOT NULL,
  7   MOID VARCHAR(383 BYTE) NOT NULL,
  8   MONAME VARCHAR(750 BYTE) NOT NULL,
  9   ERRINFO VARCHAR(3990 BYTE) NOT NULL,
 10   ERRPARA VARCHAR(1536 BYTE),
 11   ILEVEL NUMBER(10) NOT NULL DEFAULT 0,
 12   ERRLOCATION VARCHAR(383 BYTE),
 13   PRIMARY KEY(IINDEX)
 14 );

Succeed.

SQL> 
SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(149,'A4',28,101,'CMENEID:101,CMERECORDID:1_23_0_0_0_36_6','BTSCONNECT','CM_ERROR_NOSRAN30_BTS_SHOULD_NOT_INPUT_CN_SRN_SN','TDM_TEST2;BTSCONNECT@INCN;BTSCONNECT@INSRN;BTSCONNECT@INSN',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(148,'A4',28,101,'CMENEID:101,CMERECORDID:1_11_0_0_14_18_3','BTSCONNECT','CM_ERROR_NOSRAN30_BTS_SHOULD_NOT_INPUT_CN_SRN_SN','TDM_TEST2;BTSCONNECT@INCN;BTSCONNECT@INSRN;BTSCONNECT@INSN',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(147,'A4',28,101,'CMENEID:101,CMERECORDID:1_0_0_0_0_0_0','BTSCONNECT','CM_ERROR_NOSRAN30_BTS_SHOULD_NOT_INPUT_CN_SRN_SN','TDM_TEST2;BTSCONNECT@INCN;BTSCONNECT@INSRN;BTSCONNECT@INSN',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(146,'A4',28,101,'CMENEID:101,CMERECORDID:0_0_0_0_0_0_0','BTSCONNECT','CM_ERROR_NOSRAN30_BTS_SHOULD_NOT_INPUT_CN_SRN_SN','TDM_TEST1;BTSCONNECT@INCN;BTSCONNECT@INSRN;BTSCONNECT@INSN',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(145,'A4',28,101,'CMENEID:101,BTSID:1','BTSAUTODLDACTINFO','BTSOM_BTSCM_SITE_BTSAUTODLDACTINFO_ADLDACT_OFF','TDM_TEST2;BTSAUTODLDACTINFO@ADLDACT;BTSAUTODLDACTINFO@ADVER1;BTSAUTODLDACTINFO@ADVER2;BTSAUTODLDACTINFO@PV;BTSAUTODLDACTINFO@ADMODE',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(144,'A4',28,101,'CMENEID:101,BTSID:0','BTSAUTODLDACTINFO','BTSOM_BTSCM_SITE_BTSAUTODLDACTINFO_ADLDACT_OFF','TDM_TEST1;BTSAUTODLDACTINFO@ADLDACT;BTSAUTODLDACTINFO@ADVER1;BTSAUTODLDACTINFO@ADVER2;BTSAUTODLDACTINFO@PV;BTSAUTODLDACTINFO@ADMODE',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(285,'A4',37,126,'CMENEID:126,CMERECORDID:1_23_0_0_0_36_6','BTSCONNECT','CM_ERROR_NOSRAN30_BTS_SHOULD_NOT_INPUT_CN_SRN_SN','TDM_TEST2;BTSCONNECT@INCN;BTSCONNECT@INSRN;BTSCONNECT@INSN',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(284,'A4',37,126,'CMENEID:126,CMERECORDID:1_11_0_0_14_18_3','BTSCONNECT','CM_ERROR_NOSRAN30_BTS_SHOULD_NOT_INPUT_CN_SRN_SN','TDM_TEST2;BTSCONNECT@INCN;BTSCONNECT@INSRN;BTSCONNECT@INSN',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(283,'A4',37,126,'CMENEID:126,CMERECORDID:1_0_0_0_0_0_0','BTSCONNECT','CM_ERROR_NOSRAN30_BTS_SHOULD_NOT_INPUT_CN_SRN_SN','TDM_TEST2;BTSCONNECT@INCN;BTSCONNECT@INSRN;BTSCONNECT@INSN',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(282,'A4',37,126,'CMENEID:126,CMERECORDID:0_0_0_0_0_0_0','BTSCONNECT','CM_ERROR_NOSRAN30_BTS_SHOULD_NOT_INPUT_CN_SRN_SN','TDM_TEST1;BTSCONNECT@INCN;BTSCONNECT@INSRN;BTSCONNECT@INSN',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(281,'A4',37,126,'CMENEID:126,BTSID:1','BTSAUTODLDACTINFO','BTSOM_BTSCM_SITE_BTSAUTODLDACTINFO_ADLDACT_OFF','TDM_TEST2;BTSAUTODLDACTINFO@ADLDACT;BTSAUTODLDACTINFO@ADVER1;BTSAUTODLDACTINFO@ADVER2;BTSAUTODLDACTINFO@PV;BTSAUTODLDACTINFO@ADMODE',1,null);

1 rows affected.

SQL> INSERT INTO UTILS_ERRLOG (IINDEX,VERSION,PLANID,CMENEID,MOID,MONAME,ERRINFO,ERRPARA,ILEVEL,ERRLOCATION) values(280,'A4',37,126,'CMENEID:126,BTSID:0','BTSAUTODLDACTINFO','BTSOM_BTSCM_SITE_BTSAUTODLDACTINFO_ADLDACT_OFF','TDM_TEST1;BTSAUTODLDACTINFO@ADLDACT;BTSAUTODLDACTINFO@ADVER1;BTSAUTODLDACTINFO@ADVER2;BTSAUTODLDACTINFO@PV;BTSAUTODLDACTINFO@ADMODE',1,null);

1 rows affected.

SQL> 
SQL> CREATE GLOBAL TEMPORARY TABLE T_VTABSP_CHK_BTSOTHPARA_A42
  2 (
  3   PLANID NUMBER(10) NOT NULL,
  4   CMENEID NUMBER(10) NOT NULL,
  5   BTSID NUMBER(10) NOT NULL,
  6   BTSTYPE NUMBER(10) NOT NULL,
  7   BTSNAME VARCHAR(150 BYTE) NOT NULL,
  8   ISSUPERBTS NUMBER(10),
  9   MAINDEVTAB VARCHAR(150 BYTE),
 10   BAKDEVTAB VARCHAR(150 BYTE)
 11 );

Succeed.

SQL> 
SQL> CREATE TABLE T_D_BTSOTHPARA_A4
  2 (
  3   SAVEPOINTID NUMBER(10) NOT NULL,
  4   OPERTYPE NUMBER(3) NOT NULL,
  5   PLANID NUMBER(10) NOT NULL,
  6   CMENEID NUMBER(10) NOT NULL,
  7   BTSID NUMBER(10) NOT NULL,
  8   SYNCMETHOD NUMBER(3),
  9   PSUTURNINGOFFENABLE NUMBER(3),
 10   BTSDETECTSWITCH NUMBER(3),
 11   PAADJVOL NUMBER(3),
 12   RESETTIME NUMBER(3),
 13   SENDSAMBE NUMBER(3),
 14   ISSUPERBTS NUMBER(3),
 15   JITBUFDELAY NUMBER(3),
 16   PROBESEQ NUMBER(3),
 17   PRIVATEPROBENUM NUMBER(3),
 18   PRIVATEPROBEFST NUMBER(3),
 19   PRIVATEPROBESND NUMBER(3),
 20   PDCHGBR NUMBER(3),
 21   MCPACUTPWRPRIPOLICY NUMBER(3),
 22   MCPACUTPSCUTPWRRANGE NUMBER(3),
 23   SPRTLU NUMBER(3),
 24   ABISIDLETSCFGSWITCH NUMBER(3),
 25   ABISIDLETSALLOC NUMBER(3),
 26   ENERGYMNG NUMBER(3),
 27   MTSTURNOFF NUMBER(3),
 28   SPRECM NUMBER(3),
 29   ECMP NUMBER(3),
 30   HIGHMODPWRSW NUMBER(3),
 31   BATIMS NUMBER(3),
 32   CPRIFASTRING NUMBER(3),
 33   SUPPORTE1UNBA NUMBER(3),
 34   E1BLNMD NUMBER(3),
 35   TSSHTDOWNEN NUMBER(3),
 36   VSWRTHRESOPT NUMBER(3),
 37   FASTTRXAIDSW NUMBER(3),
 38   STPPWRCHK NUMBER(3),
 39   AISSOP NUMBER(3),
 40   AISSFREQ NUMBER(3),
 41   AISSNETMODE NUMBER(3),
 42   E1PORTFAILDELAY NUMBER(3),
 43   E1PORTSTAQUICKREPSW NUMBER(3),
 44   VSWRDETECTSENENHSW NUMBER(3),
 45   PTRAUTSNSNEXTSW NUMBER(3),
 46   BTSDBUS32KCFGSW NUMBER(3),
 47   IPCLKSYNMODE NUMBER(3),
 48   SDBBLSD NUMBER(3),
 49   AMRTRANSBANDTHCOMPSW NUMBER(3),
 50   BTSSIGNALMSGCOMPSW NUMBER(3),
 51   ABISSIDSENDPERIOD NUMBER(3),
 52   ABISUSERFRAMEMUXDELAY NUMBER(3),
 53   OMLFAILROLLBACKPOLICY NUMBER(3),
 54   DUAPAPOWSHRCONFCHEOPTSW NUMBER(3),
 55   IWFVLANOPTSW NUMBER(3),
 56   NOTRAFFICSELFHEALSW NUMBER(3),
 57   RFUNITSTDETECTSW NUMBER(3),
 58   RFUNITSTDETECTREFRLALMSW NUMBER(3),
 59   RFUNITSTDETECTSNRTHRD NUMBER(3),
 60   RFUNITSTDETECTPNTHRD NUMBER(3),
 61   DRFURELAYDETECTSW NUMBER(3),
 62   BOARDRUNABNORMALOPTSW NUMBER(3),
 63   LOGUPTID VARCHAR(383 BYTE),
 64   NBI_RECID NUMBER(10),
 65   ISGENMML NUMBER(3),
 66   PRIMARY KEY(PLANID, CMENEID, BTSID, OPERTYPE, SAVEPOINTID)
 67 );

Succeed.

SQL> 
SQL> INSERT INTO T_D_BTSOTHPARA_A4 (SAVEPOINTID,OPERTYPE,PLANID,CMENEID,BTSID,SYNCMETHOD,PSUTURNINGOFFENABLE,BTSDETECTSWITCH,PAADJVOL,RESETTIME,SENDSAMBE,ISSUPERBTS,JITBUFDELAY,PROBESEQ,PRIVATEPROBENUM,PRIVATEPROBEFST,PRIVATEPROBESND,PDCHGBR,MCPACUTPWRPRIPOLICY,MCPACUTPSCUTPWRRANGE,SPRTLU,ABISIDLETSCFGSWITCH,ABISIDLETSALLOC,ENERGYMNG,MTSTURNOFF,SPRECM,ECMP,HIGHMODPWRSW,BATIMS,CPRIFASTRING,SUPPORTE1UNBA,E1BLNMD,TSSHTDOWNEN,VSWRTHRESOPT,FASTTRXAIDSW,STPPWRCHK,AISSOP,AISSFREQ,AISSNETMODE,E1PORTFAILDELAY,E1PORTSTAQUICKREPSW,VSWRDETECTSENENHSW,PTRAUTSNSNEXTSW,BTSDBUS32KCFGSW,IPCLKSYNMODE,SDBBLSD,AMRTRANSBANDTHCOMPSW,BTSSIGNALMSGCOMPSW,ABISSIDSENDPERIOD,ABISUSERFRAMEMUXDELAY,OMLFAILROLLBACKPOLICY,DUAPAPOWSHRCONFCHEOPTSW,IWFVLANOPTSW,NOTRAFFICSELFHEALSW,RFUNITSTDETECTSW,RFUNITSTDETECTREFRLALMSW,RFUNITSTDETECTSNRTHRD,RFUNITSTDETECTPNTHRD,DRFURELAYDETECTSW,BOARDRUNABNORMALOPTSW,LOGUPTID,NBI_RECID,ISGENMML) values(0,2,35,116,0,0,0,0,null,15,1,null,2,255,null,null,null,0,0,null,0,0,0,0,255,1,0,0,0,0,0,null,0,1,0,0,0,null,null,0,0,0,null,null,null,null,0,null,null,null,0,0,null,1,0,null,null,null,0,1,null,508,0);

1 rows affected.

SQL> INSERT INTO T_D_BTSOTHPARA_A4 (SAVEPOINTID,OPERTYPE,PLANID,CMENEID,BTSID,SYNCMETHOD,PSUTURNINGOFFENABLE,BTSDETECTSWITCH,PAADJVOL,RESETTIME,SENDSAMBE,ISSUPERBTS,JITBUFDELAY,PROBESEQ,PRIVATEPROBENUM,PRIVATEPROBEFST,PRIVATEPROBESND,PDCHGBR,MCPACUTPWRPRIPOLICY,MCPACUTPSCUTPWRRANGE,SPRTLU,ABISIDLETSCFGSWITCH,ABISIDLETSALLOC,ENERGYMNG,MTSTURNOFF,SPRECM,ECMP,HIGHMODPWRSW,BATIMS,CPRIFASTRING,SUPPORTE1UNBA,E1BLNMD,TSSHTDOWNEN,VSWRTHRESOPT,FASTTRXAIDSW,STPPWRCHK,AISSOP,AISSFREQ,AISSNETMODE,E1PORTFAILDELAY,E1PORTSTAQUICKREPSW,VSWRDETECTSENENHSW,PTRAUTSNSNEXTSW,BTSDBUS32KCFGSW,IPCLKSYNMODE,SDBBLSD,AMRTRANSBANDTHCOMPSW,BTSSIGNALMSGCOMPSW,ABISSIDSENDPERIOD,ABISUSERFRAMEMUXDELAY,OMLFAILROLLBACKPOLICY,DUAPAPOWSHRCONFCHEOPTSW,IWFVLANOPTSW,NOTRAFFICSELFHEALSW,RFUNITSTDETECTSW,RFUNITSTDETECTREFRLALMSW,RFUNITSTDETECTSNRTHRD,RFUNITSTDETECTPNTHRD,DRFURELAYDETECTSW,BOARDRUNABNORMALOPTSW,LOGUPTID,NBI_RECID,ISGENMML) values(0,2,35,116,1,0,0,0,null,15,1,null,2,255,null,null,null,0,0,null,0,0,0,0,255,1,0,0,0,0,0,null,0,1,0,0,0,null,null,0,0,0,null,null,null,null,0,null,null,null,0,0,null,1,0,null,null,null,0,1,null,509,0);

1 rows affected.

SQL> INSERT INTO T_D_BTSOTHPARA_A4 (SAVEPOINTID,OPERTYPE,PLANID,CMENEID,BTSID,SYNCMETHOD,PSUTURNINGOFFENABLE,BTSDETECTSWITCH,PAADJVOL,RESETTIME,SENDSAMBE,ISSUPERBTS,JITBUFDELAY,PROBESEQ,PRIVATEPROBENUM,PRIVATEPROBEFST,PRIVATEPROBESND,PDCHGBR,MCPACUTPWRPRIPOLICY,MCPACUTPSCUTPWRRANGE,SPRTLU,ABISIDLETSCFGSWITCH,ABISIDLETSALLOC,ENERGYMNG,MTSTURNOFF,SPRECM,ECMP,HIGHMODPWRSW,BATIMS,CPRIFASTRING,SUPPORTE1UNBA,E1BLNMD,TSSHTDOWNEN,VSWRTHRESOPT,FASTTRXAIDSW,STPPWRCHK,AISSOP,AISSFREQ,AISSNETMODE,E1PORTFAILDELAY,E1PORTSTAQUICKREPSW,VSWRDETECTSENENHSW,PTRAUTSNSNEXTSW,BTSDBUS32KCFGSW,IPCLKSYNMODE,SDBBLSD,AMRTRANSBANDTHCOMPSW,BTSSIGNALMSGCOMPSW,ABISSIDSENDPERIOD,ABISUSERFRAMEMUXDELAY,OMLFAILROLLBACKPOLICY,DUAPAPOWSHRCONFCHEOPTSW,IWFVLANOPTSW,NOTRAFFICSELFHEALSW,RFUNITSTDETECTSW,RFUNITSTDETECTREFRLALMSW,RFUNITSTDETECTSNRTHRD,RFUNITSTDETECTPNTHRD,DRFURELAYDETECTSW,BOARDRUNABNORMALOPTSW,LOGUPTID,NBI_RECID,ISGENMML) values(0,2,37,126,1,0,0,0,null,15,1,null,2,255,null,null,null,0,0,null,0,0,0,0,255,1,0,0,0,0,0,null,0,1,0,0,0,null,null,0,0,0,null,null,null,null,0,null,null,null,0,0,null,1,0,null,null,null,0,1,null,509,0);

1 rows affected.

SQL> INSERT INTO T_D_BTSOTHPARA_A4 (SAVEPOINTID,OPERTYPE,PLANID,CMENEID,BTSID,SYNCMETHOD,PSUTURNINGOFFENABLE,BTSDETECTSWITCH,PAADJVOL,RESETTIME,SENDSAMBE,ISSUPERBTS,JITBUFDELAY,PROBESEQ,PRIVATEPROBENUM,PRIVATEPROBEFST,PRIVATEPROBESND,PDCHGBR,MCPACUTPWRPRIPOLICY,MCPACUTPSCUTPWRRANGE,SPRTLU,ABISIDLETSCFGSWITCH,ABISIDLETSALLOC,ENERGYMNG,MTSTURNOFF,SPRECM,ECMP,HIGHMODPWRSW,BATIMS,CPRIFASTRING,SUPPORTE1UNBA,E1BLNMD,TSSHTDOWNEN,VSWRTHRESOPT,FASTTRXAIDSW,STPPWRCHK,AISSOP,AISSFREQ,AISSNETMODE,E1PORTFAILDELAY,E1PORTSTAQUICKREPSW,VSWRDETECTSENENHSW,PTRAUTSNSNEXTSW,BTSDBUS32KCFGSW,IPCLKSYNMODE,SDBBLSD,AMRTRANSBANDTHCOMPSW,BTSSIGNALMSGCOMPSW,ABISSIDSENDPERIOD,ABISUSERFRAMEMUXDELAY,OMLFAILROLLBACKPOLICY,DUAPAPOWSHRCONFCHEOPTSW,IWFVLANOPTSW,NOTRAFFICSELFHEALSW,RFUNITSTDETECTSW,RFUNITSTDETECTREFRLALMSW,RFUNITSTDETECTSNRTHRD,RFUNITSTDETECTPNTHRD,DRFURELAYDETECTSW,BOARDRUNABNORMALOPTSW,LOGUPTID,NBI_RECID,ISGENMML) values(0,2,37,126,0,0,0,0,null,15,1,null,2,255,null,null,null,0,0,null,0,0,0,0,255,1,0,0,0,0,0,null,0,1,0,0,0,null,null,0,0,0,null,null,null,null,0,null,null,null,0,0,null,1,0,null,null,null,0,1,null,508,0);

1 rows affected.

SQL> INSERT INTO T_D_BTSOTHPARA_A4 (SAVEPOINTID,OPERTYPE,PLANID,CMENEID,BTSID,SYNCMETHOD,PSUTURNINGOFFENABLE,BTSDETECTSWITCH,PAADJVOL,RESETTIME,SENDSAMBE,ISSUPERBTS,JITBUFDELAY,PROBESEQ,PRIVATEPROBENUM,PRIVATEPROBEFST,PRIVATEPROBESND,PDCHGBR,MCPACUTPWRPRIPOLICY,MCPACUTPSCUTPWRRANGE,SPRTLU,ABISIDLETSCFGSWITCH,ABISIDLETSALLOC,ENERGYMNG,MTSTURNOFF,SPRECM,ECMP,HIGHMODPWRSW,BATIMS,CPRIFASTRING,SUPPORTE1UNBA,E1BLNMD,TSSHTDOWNEN,VSWRTHRESOPT,FASTTRXAIDSW,STPPWRCHK,AISSOP,AISSFREQ,AISSNETMODE,E1PORTFAILDELAY,E1PORTSTAQUICKREPSW,VSWRDETECTSENENHSW,PTRAUTSNSNEXTSW,BTSDBUS32KCFGSW,IPCLKSYNMODE,SDBBLSD,AMRTRANSBANDTHCOMPSW,BTSSIGNALMSGCOMPSW,ABISSIDSENDPERIOD,ABISUSERFRAMEMUXDELAY,OMLFAILROLLBACKPOLICY,DUAPAPOWSHRCONFCHEOPTSW,IWFVLANOPTSW,NOTRAFFICSELFHEALSW,RFUNITSTDETECTSW,RFUNITSTDETECTREFRLALMSW,RFUNITSTDETECTSNRTHRD,RFUNITSTDETECTPNTHRD,DRFURELAYDETECTSW,BOARDRUNABNORMALOPTSW,LOGUPTID,NBI_RECID,ISGENMML) values(0,2,36,121,0,0,0,0,null,15,1,null,2,255,null,null,null,0,0,null,0,0,0,0,255,1,0,0,0,0,0,null,0,1,0,0,0,null,null,0,0,0,null,null,null,null,0,null,null,null,0,0,null,1,0,null,null,null,0,1,null,508,0);

1 rows affected.

SQL> INSERT INTO T_D_BTSOTHPARA_A4 (SAVEPOINTID,OPERTYPE,PLANID,CMENEID,BTSID,SYNCMETHOD,PSUTURNINGOFFENABLE,BTSDETECTSWITCH,PAADJVOL,RESETTIME,SENDSAMBE,ISSUPERBTS,JITBUFDELAY,PROBESEQ,PRIVATEPROBENUM,PRIVATEPROBEFST,PRIVATEPROBESND,PDCHGBR,MCPACUTPWRPRIPOLICY,MCPACUTPSCUTPWRRANGE,SPRTLU,ABISIDLETSCFGSWITCH,ABISIDLETSALLOC,ENERGYMNG,MTSTURNOFF,SPRECM,ECMP,HIGHMODPWRSW,BATIMS,CPRIFASTRING,SUPPORTE1UNBA,E1BLNMD,TSSHTDOWNEN,VSWRTHRESOPT,FASTTRXAIDSW,STPPWRCHK,AISSOP,AISSFREQ,AISSNETMODE,E1PORTFAILDELAY,E1PORTSTAQUICKREPSW,VSWRDETECTSENENHSW,PTRAUTSNSNEXTSW,BTSDBUS32KCFGSW,IPCLKSYNMODE,SDBBLSD,AMRTRANSBANDTHCOMPSW,BTSSIGNALMSGCOMPSW,ABISSIDSENDPERIOD,ABISUSERFRAMEMUXDELAY,OMLFAILROLLBACKPOLICY,DUAPAPOWSHRCONFCHEOPTSW,IWFVLANOPTSW,NOTRAFFICSELFHEALSW,RFUNITSTDETECTSW,RFUNITSTDETECTREFRLALMSW,RFUNITSTDETECTSNRTHRD,RFUNITSTDETECTPNTHRD,DRFURELAYDETECTSW,BOARDRUNABNORMALOPTSW,LOGUPTID,NBI_RECID,ISGENMML) values(0,2,36,121,1,0,0,0,null,15,1,null,2,255,null,null,null,0,0,null,0,0,0,0,255,1,0,0,0,0,0,null,0,1,0,0,0,null,null,0,0,0,null,null,null,null,0,null,null,null,0,0,null,1,0,null,null,null,0,1,null,509,0);

1 rows affected.

SQL> 
SQL> CREATE or replace FUNCTION func_objectid(A NUMBER)
  2 RETURN INT
  3 AS
  4 BEGIN
  5    if (A = 35) then
  6    	return A;
  7    else
  8    	return 0;
  9    end if; 
 10 END;
 11 /

Succeed.

SQL> 
SQL> INSERT INTO T_VTABSP_CHK_BTSOTHPARA_A42 (PLANID,CMENEID,BTSID,BTSTYPE,BTSNAME,ISSUPERBTS,MAINDEVTAB,BAKDEVTAB ) values(35,116,0,0,'zzz',0,'','');

1 rows affected.

SQL> select distinct 'A4' , a.PlanID , a.CMENEID , 'CMENEID:' as MoID , 'BTSOTHPARA' , 'GEN_CM_MML_SITE_MML_PTU_BARCODE_DUPLICATED' , b.BTSNAME || ';BTSESN@MAINDEVTAB;' || ';BTSESN@BAKDEVTAB'  from t_D_BTSOTHPARA_A4 a join t_vTabsp_Chk_BTSOTHPARA_A42 b on b.PlanID = a.PlanID and b.CMENEID = a.CMENEID and b.BTSID = a.BTSID where a.PlanID = 35 and a.OperType in (2 , 4 ) and func_objectid(b.PlanID) = 35;

'A4' PLANID                                   CMENEID                                  MOID     'BTSOTHPARA' 'GEN_CM_MML_SITE_MML_PTU_BARCODE_DUPLICATED' B.BTSNAME || ';BTSESN@MAINDEVTAB;' || ';BTSESN@BAKDEVTAB'       
---- ---------------------------------------- ---------------------------------------- -------- ------------ -------------------------------------------- ----------------------------------------------------------------
A4   35                                       116                                      CMENEID: BTSOTHPARA   GEN_CM_MML_SITE_MML_PTU_BARCODE_DUPLICATED   zzz;BTSESN@MAINDEVTAB;;BTSESN@BAKDEVTAB                         

1 rows fetched.

SQL> 
SQL> DROP TABLE IF EXISTS USER_FUNC_TEMP;

Succeed.

SQL> CREATE TABLE USER_FUNC_TEMP(ID INT);

Succeed.

SQL> CREATE OR REPLACE FUNCTION USER_FUNC_CHG_TEMP(a INT) RETURN INT
  2 AS c INT;
  3 BEGIN
  4 c := a; 
  5 INSERT INTO USER_FUNC_TEMP VALUES (c);
  6 return c;
  7 END USER_FUNC_CHG_TEMP;
  8 /

Succeed.

SQL> select USER_FUNC_CHG_TEMP(1) from dual;

USER_FUNC_CHG_TEMP(1)
---------------------
1                    

1 rows fetched.

SQL> drop table USER_FUNC_TEMP;

Succeed.

SQL> drop FUNCTION USER_FUNC_CHG_TEMP;

Succeed.

SQL> 
SQL> drop table if exists t_sub_query_101;

Succeed.

SQL> create table t_sub_query_101(id int,c_int int not null,c_vchar varchar(100) not null,c_clob clob not null,c_blob blob not null,c_date date);

Succeed.

SQL> CREATE OR REPLACE FUNCTION pro3(p2 integer ) return integer
  2 IS
  3 CURRENT_USER varchar(10);
  4 BEGIN
  5 CURRENT_USER := 'cantian';
  6 dbe_output.print_line( 'results' || CURRENT_USER||':'||p2);
  7 RETURN p2;
  8 END;
  9 /

Succeed.

SQL> select pro3((select c_int from t_sub_query_101 where id=1)) from dual;

PRO3((SELECT C_INT FROM T_SUB_QUERY_101 WHERE ID=1))
----------------------------------------------------
                                                    

1 rows fetched.

SQL> 


