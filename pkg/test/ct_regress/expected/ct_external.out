SQL> create directory test_dir as '/home/cantiandba';

Succeed.

SQL> select * from sys_directories;

USER#        DIRECTORY_NAME                                                   DIRECTORY_PATH
------------ ---------------------------------------------------------------- ----------------------------------------------------------------
0            TEST_DIR                                                         /home/cantiandba

1 rows fetched.

SQL> drop directory test_dir;

Succeed.

SQL> create user test identified by Cantian_234;

Succeed.

SQL> grant read on directory test_dir to test;

CT-00708, The object directory TEST_DIR does not exist
SQL> create directory test_dir as '/home/cantiandba';

Succeed.

SQL> grant connect, read on directory test_dir to test;

CT-00601, Sql syntax error: invalid privilege on directory
SQL> grant write on directory test_dir to test;

CT-00101, Capability: grant write/excute privilege on directory not supported
SQL> grant execute on directory test_dir to test;

CT-00101, Capability: grant write/excute privilege on directory not supported
SQL> grant read on directory test_dir to test;

Succeed.

SQL> select count(*) from sys_object_privs where OBJECT_NAME = 'TEST_DIR';

COUNT(*)
--------------------
1

1 rows fetched.

SQL> drop directory test_dir;

Succeed.

SQL> select count(*) from sys_object_privs where OBJECT_NAME = 'TEST_DIR';

COUNT(*)
--------------------
0

1 rows fetched.

SQL> revoke read on directory test_dir from test;

CT-01002, Privileges READ ON DIRECTORY has not granted to TEST
SQL> grant read on directory test_dir to test with grant option;

CT-00708, The object directory TEST_DIR does not exist
SQL> create directory test_dir as '/home/cantiandba';

Succeed.

SQL> grant read on directory test_dir to test with grant option;

Succeed.

SQL> revoke read on directory test_dir from test;

Succeed.

SQL> create role test_role;

Succeed.

SQL> grant read on directory test_dir to test_role;

Succeed.

SQL> grant test_role to test;

Succeed.

SQL> select count(*) from sys_object_privs where OBJECT_NAME = 'TEST_DIR';

COUNT(*)
--------------------
1

1 rows fetched.

SQL> revoke read on directory test_dir from test_role;

Succeed.

SQL> select count(*) from sys_object_privs where OBJECT_NAME = 'TEST_DIR';

COUNT(*)
--------------------
0

1 rows fetched.

SQL> drop user test;

Succeed.

SQL> drop role test_role;

Succeed.

SQL> create or replace directory test_dir as '/home/regress/CantianKernel/pkg/test/ct_regress/data';

Succeed.

SQL> select * from sys_directories;

USER#        DIRECTORY_NAME                                                   DIRECTORY_PATH
------------ ---------------------------------------------------------------- ----------------------------------------------------------------
0            TEST_DIR                                                         /home/regress/CantianKernel/pkg/test/ct_regress/data

1 rows fetched.

SQL> drop table if exists ext_1;

Succeed.

SQL> create table ext_1(c1 int, c2 float, c3 decimal, c4 real, c5 varchar(32), c6 datetime, c7 timestamp) 
  2 organization external
  3 (
  4 	type loader
  5 	directory test_dir
  6 	access parameters(
  7 	    records delimited by newline
  8 	    fields terminated by ',')
  9     location 'external_1.data'
 10 );

Succeed.

SQL> 
SQL> drop table if exists ext_2;

Succeed.

SQL> create table ext_2(c1 int, c2 float, c3 decimal, c4 real, c5 varchar(32), c6 datetime, c7 timestamp)
  2 organization external
  3 (
  4     directory test_dir
  5     location 'external_1.data'
  6 );

Succeed.

SQL> 
SQL> drop table if exists ext_3;

Succeed.

SQL> create table ext_3(c1 int, c2 float, c3 decimal, c4 real, c5 varchar(32), c6 datetime, c7 timestamp)
  2 organization external
  3 (
  4 	type loader
  5 	directory test_dir
  6 	location 'external_1.data'
  7 );

Succeed.

SQL> 
SQL> drop table if exists ext_4;

Succeed.

SQL> create table ext_4(c1 int, c2 float, c3 decimal, c4 real, c5 varchar(32), c6 datetime, c7 timestamp)
  2 organization external
  3 (
  4 	type datapump
  5   	directory test_dir
  6     location 'external_1.data'
  7 );

CT-00101, Capability: datapump external table not supported
SQL> 
SQL> drop table if exists ext_5;

Succeed.

SQL> create table ext_5(id int, name varchar(60))
  2 organization external
  3 (
  4     directory test_dir
  5     location 'external_2.data'
  6 );

Succeed.

SQL> 
SQL> drop table if exists ext_6;

Succeed.

SQL> create table ext_6(
  2 SRC_ADDR varchar(20) not null,   
  3 DST_ADDR varchar(20) not null,   
  4 NEXTHOP  varchar(20) not null,
  5 IN_IFID varchar(20) not null,   
  6 OUT_IFID varchar(20) not null,   
  7 BYTES varchar(20) not null,
  8 PACKETS varchar(20) not null,   
  9 FLOWS varchar(20) not null,   
 10 SRC_PORT varchar(20) not null,
 11 DST_PORT varchar(20) not null,   
 12 PROTOCOLID varchar(20) not null,   
 13 TOS varchar(20) not null,
 14 TCP_FLAG varchar(20) not null,   
 15 SRC_AS varchar(20) not null,   
 16 DST_AS varchar(20) not null,
 17 SRC_MASK varchar(20) not null,   
 18 DST_MASK varchar(20) not null,   
 19 FLOW_START_TIME varchar(20) not null,
 20 FLOW_END_TIME varchar(20) not null,   
 21 DEVICEID varchar(20) not null,   
 22 FS_TIME varchar(20) not null,
 23 APPID varchar(20) not null,   
 24 FLOW_DURATION varchar(20) not null, 
 25 FLOW_DIRECTION varchar(20) not null,    
 26 BGP_NEXTHOP varchar(20) not null, 
 27 SRC_VLAN varchar(20) not null,    
 28 DST_VLAN varchar(20) not null,    
 29 VPNID varchar(20) not null, 
 30 DROP_ATTR varchar(20) not null)
 31 organization external
 32 (
 33     type loader
 34     directory test_dir
 35     access parameters(
 36     records delimited by '^'
 37     fields terminated by '|')
 38     location 'external_3.data'
 39 );

Succeed.

SQL> 
SQL> create table ext_7(id int, name clob)
  2 organization external
  3 (
  4     directory test_dir
  5     location 'external_2.data'
  6 );

CT-00130, Operation lob type is not supported on external organized table
SQL>
SQL> create table ext_8(c1 int, c2 float default 10.3, c3 decimal, c4 real, c5 varchar(32), c6 datetime, c7 timestamp)
  2 organization external
  3 (
  4     type loader
  5     directory test_dir
  6     access parameters(
  7         records delimited by newline
  8         fields terminated by ',')
  9     location 'external_1.data'
 10 );

CT-00101, Capability: specify default value for external table column not supported
SQL> 
SQL> select count(*) from SYS_EXTERNAL_TABLES;

COUNT(*)            
--------------------
5                   

1 rows fetched.

SQL> select * from ext_1 where c1=1;

C1           C2                   C3                                       C4                   C5                               C6                     C7                              
------------ -------------------- ---------------------------------------- -------------------- -------------------------------- ---------------------- --------------------------------
1            1.1                  1.2                                      1.3                  aa                               2017-09-22 12:34:56    2017-09-22 12:34:56.000000      

1 rows fetched.

SQL> select * from ext_2 where c5='aa';

C1           C2                   C3                                       C4                   C5                               C6                     C7                              
------------ -------------------- ---------------------------------------- -------------------- -------------------------------- ---------------------- --------------------------------
1            1.1                  1.2                                      1.3                  aa                               2017-09-22 12:34:56    2017-09-22 12:34:56.000000      

1 rows fetched.

SQL> select * from ext_3;

C1           C2                   C3                                       C4                   C5                               C6                     C7                              
------------ -------------------- ---------------------------------------- -------------------- -------------------------------- ---------------------- --------------------------------
1            1.1                  1.2                                      1.3                  aa                               2017-09-22 12:34:56    2017-09-22 12:34:56.000000      
2            2.1                  2.2                                      2.3                  bb                               2017-10-22 12:34:56    2017-10-22 12:34:56.000000      
                                                                                                                                                        2017-01-22 12:34:56.000000      
4            4.1                  4.2                                      4.3                                                   2017-02-22 12:34:56    2017-02-22 12:34:56.000000      
5            5.1                  5.2                                      5.3                  ee                               2017-03-22 12:34:56    2017-03-22 12:34:56.000000      

5 rows fetched.

SQL> select * from ext_4;

CT-00843, [1:15]The table or view SYS.EXT_4 does not exist.
SQL> select count(*) from ext_5;

COUNT(*)            
--------------------
30000               

1 rows fetched.

SQL> select * from ext_5 where id>500 and id<=510;

ID           NAME                                                        
------------ ------------------------------------------------------------
501          aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa          
502          aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa          
503          aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa          
504          aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa          
505          aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa          
506          aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa          
507          aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa          
508          aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa          
509          aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa          
510          aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa          

10 rows fetched.

SQL> select count(*) from ext_6;

COUNT(*)            
--------------------
20                  

1 rows fetched.

SQL> select * from ext_6;

SRC_ADDR             DST_ADDR             NEXTHOP              IN_IFID              OUT_IFID             BYTES                PACKETS              FLOWS                SRC_PORT             DST_PORT             PROTOCOLID           TOS                  TCP_FLAG             SRC_AS               DST_AS               SRC_MASK             DST_MASK             FLOW_START_TIME      FLOW_END_TIME        DEVICEID             FS_TIME              APPID                FLOW_DURATION        FLOW_DIRECTION       BGP_NEXTHOP          SRC_VLAN             DST_VLAN             VPNID                DROP_ATTR           
-------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- -------------------- --------------------
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   
12                   323223577            3232235777           0                    31                   300000               30000                1                    89                   33584                7                    9                    16                   0                    0                    24                   24                   1532404339142        1532404440142        1                    1532404440142        2006                 101000               1                    0                    0                    0                    0                    0                   

20 rows fetched.

SQL> 
SQL> insert into ext_1(c1,c5) values(1,'dd');

CT-00130, [1:13]Operation dml is not supported on external organized table
SQL> update ext_1 set c1=c1+1;

CT-00130, [1:8]Operation dml is not supported on external organized table
SQL> delete from ext_1;

CT-00130, [1:13]Operation dml is not supported on external organized table
SQL> drop table ext_1;

Succeed.

SQL> drop table ext_2;

Succeed.

SQL> drop table ext_3;

Succeed.

SQL> drop table ext_4;

CT-00843, The table or view SYS.EXT_4 does not exist.
SQL> drop table ext_5;

Succeed.

SQL> drop table ext_6;

Succeed.

SQL> drop table ext_7;

CT-00843, The table or view SYS.EXT_7 does not exist.
SQL> 
SQL> drop table if exists ext_9;

Succeed.

SQL> create table ext_9(c1 int, c2 float, c3 decimal, c4 real, c5 varchar(32), c6 datetime, c7 timestamp)
  2 organization external
  3 (
  4     type loader
  5     directory test_dir
  6     access parameters(
  7         records delimited by ','
  8         fields terminated by ',')
  9     location 'external_1.data'
 10 );

CT-00601, Sql syntax error: the records delimiter must different from fields delimiter
SQL>
SQL> drop table if exists ext_10;

Succeed.

SQL> create table ext_10(c1 int, c2 float, c3 decimal, c4 real, c5 varchar(32), c6 datetime, c7 timestamp)
  2 organization external
  3 (
  4     type loader
  5     directory test_dir
  6     access parameters(
  7         records delimited by ''
  8         fields terminated by ',')
  9     location 'external_1.data'
 10 );

CT-00601, [7:22]Sql syntax error: only single character is supported for records delimiter
SQL>
SQL> drop table if exists ext_11;

Succeed.

SQL> create table ext_11(c1 int, c2 float, c3 decimal, c4 real, c5 varchar(32), c6 datetime, c7 timestamp)
  2 organization external
  3 (
  4     type loader
  5     directory test_dir
  6     access parameters(
  7         records delimited by newline
  8         fields terminated by ',')
  9     location 'external_1.data'
 10 )
 11 partition by range(c1)
 12 (
 13 partition p1 values less than(50)
 14 );

CT-00601, [11:1]Sql syntax error: unexpected string partition found
SQL>
SQL> drop table if exists ext_12;

Succeed.

SQL> create table ext_12(c1 int, c2 float, c3 decimal, c4 real, c5 varchar(32), c6 datetime, c7 timestamp)
  2 organization external
  3 (
  4     type loader
  5     directory test_dir
  6     access parameters(
  7         records delimited by newline
  8         fields terminated by ',')
  9     location 'external_1.data'
 10 )nologging;

CT-00601, [10:2]Sql syntax error: unexpected string nologging found
SQL> drop directory test_dir;

Succeed.

SQL>
SQL> create directory test_dir as 'd:\test_dir11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111';

CT-00230, d:\test_dir11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111 is not an existing folder
SQL> create directory test_diraaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa as '/home/cantiandba';

Succeed.

SQL> drop directory test_diraaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa;

Succeed.

SQL> create directory test_diraaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa as '/home/cantiandba';

CT-00748, directory name length is exceeded. name len = 64, max_len = 63
SQL> create user test identified by Cantian_234;

Succeed.

SQL> create directory test_dir as '/home/cantiandba';

Succeed.

SQL> grant read on directory test_dir to test;

Succeed.

SQL> select * from user_tab_privs where OBJECT_NAME = 'TEST_DIR';

GRANTEE                                                          OWNER                                                            OBJECT_NAME                                                      OBJECT_TYPE PRIVILEGE            GRANTABLE
---------------------------------------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- ----------- -------------------- ---------

0 rows fetched.

SQL> select * from all_objects where OBJECT_NAME = 'TEST_DIR';

OWNER                                                            OBJECT_NAME                                                      SUBOBJECT_NAME                                                   OBJECT_ID            OBJECT_TYPE     CREATED                                          LAST_DDL_TIME                                    STATUS  TEMPORARY
---------------------------------------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- -------------------- --------------- ------------------------------------------------ ------------------------------------------------ ------- ---------
SYS                                                              TEST_DIR                                                                                                                                               DIRECTORY                                                                                                                          

1 rows fetched.

SQL> select * from my_objects where OBJECT_NAME = 'TEST_DIR';

OBJECT_NAME                                                      SUBOBJECT_NAME                                                   OBJECT_ID            OBJECT_TYPE        CREATED                                          LAST_DDL_TIME                                    STATUS  TEMPORARY
---------------------------------------------------------------- ---------------------------------------------------------------- -------------------- ------------------ ------------------------------------------------ ------------------------------------------------ ------- ---------
TEST_DIR                                                                                                                                               DIRECTORY                                                                


1 rows fetched.

SQL> select * from adm_objects where OBJECT_NAME = 'TEST_DIR';

OWNER                                                            OBJECT_NAME                                                      SUBOBJECT_NAME                                                   OBJECT_ID            OBJECT_TYPE        CREATED                                          LAST_DDL_TIME                                    STATUS  TEMPORARY
---------------------------------------------------------------- ---------------------------------------------------------------- ---------------------------------------------------------------- -------------------- ------------------ ------------------------------------------------ ------------------------------------------------ ------- ---------
SYS                                                              TEST_DIR                                                                                                                                               DIRECTORY                                                                                                                          

1 rows fetched.

SQL> drop directory test_dir;

Succeed.

SQL> drop user test;

Succeed.

SQL> create directory test_dir as 'f:\test';

CT-00230, f:\test is not an existing folder
SQL> create directory test_dir as '${CTDB_HOME}';

CT-00230, ${CTDB_HOME} is not an existing folder